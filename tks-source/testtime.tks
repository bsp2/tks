// testtime.tks
//   - by Bastian Spiegel <flink@tkscript.de>
//
//     demonstrates usage of the Time class plus some tool function
//     that you can include in your applications.
//
//
module Main;

function getCurrentDateString() {
    Time t;
    t.now();
    PointerArray mnames;
    PointerArray dnames;
    prepare {
	mnames<=[
		 "Jan", "Feb", "Mar", "Apr", "May", "Jun", 
		 "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    }
    prepare {
	dnames<=["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
    }
    return t.monthday+"/"+mnames[t.month]+"/"+t.year;
}

function getCurrentTimeString() {
    Time t;
    Integer io_h;
    Integer io_m;
    Integer io_s;
    t.now();
    io_h.value=t.hour;
    io_m.value=t.min;
    io_s.value=t.sec;
    return io_h.printf("%02i")+":"+io_m.printf("%02i")+":"+io_s.printf("%02i");
}

function main() {
    trace("\nit's already "+getCurrentTimeString()+" and still the "+getCurrentDateString()+".\n\n");

    Time t;
    t.now();
    PointerArray mnames<=[
			  "January", "February", "March", "April", "May", "June", 
			  "July", "August", "Sep", "October", "November", "December"];
    PointerArray dnames<=["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    trace("today is "+dnames[t.weekday]+", the "+t.monthday+". of "+mnames[t.month]+" in the year "+t.year+".");
    t.monthday=25;
    t.month=11;
    t.calc();
    trace("xmas is on a "+dnames[t.weekday]+", the "+t.yearday+". day of this year.");

}
