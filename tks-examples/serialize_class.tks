
class MyClass {
   tag int i;
   tag float f;
   tag String s;
   tag IntArray ia;
   tag FloatArray fa;
   tag HashTable ht;

   init() {
      i=42;
      f=2PI;
      s="hello, world.";
      ia<=Object([1,2,3,4]);
      fa<=Object([1.1,2.2,3.3,4.4]);
      ht<=Object(#[a=1, b=2, c=3]);
   }
}

MyClass mc; mc.init();
Buffer b;
b.size=1024; // allocate buffer stream
b << mc;     // serialize class into stream

print "serialized "+b.offset+" bytes.";

mc<=new MyClass; // delete old object and create new MyClass object without init()
b.offset=0;  // rewind stream
mc << b;    // deserialize class from stream

print "mc.i="+mc.i;
print "mc.s="+mc.s;
print "mc.f="+mc.f;
print "mc.s="+mc.s;
print "mc.ia[2]="+mc.ia[2];
print "mc.fa[2]="+mc.fa[2];
print "mc.ht[\"c\"]="+mc.ht["c"];
