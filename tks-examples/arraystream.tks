
// requires tkscript version >=0.8.4.0

dtrace true;

// ---- generate an array of 512 random float values
// ---- and store it into a local file named "out"
FloatArray fa;
fa.alloc(512);
int i=0;
loop(512)
  fa[i++]=rnd(1.0);
File f; f.open("out", IOS_OUT);

// ---- number of elements is clamped to fa.maxElements
trace "wrote "+fa.write32(f,-1,0)+" elements.";
f.close();


// ---- verify, read in "out" file
f.open("out", IOS_IN);
fa.free();

// ---- automatically resizes array
// ---- number of elements is determined by stream.size/4 (4=sizeof(float))
trace "read "+fa.read32(f,0,0)+" elements.";

f.close();


// ---- debug output (use dtrace true; to enable)
dtrace false;
  trace "fa.numElements="+fa.numElements;
  trace "fa.maxElements="+fa.maxElements;
i=0;
loop(512)
  trace "fa["+i+"]="+fa[i++];

