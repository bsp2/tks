use tkopengl;

function Convert(String _prefix) {
   local Texture tex;
   if(tex.loadLocalImage(_prefix+".png", 0,0,4))  // keep size but convert to 4 bytes per pixel (BGRA8)
   {
      File f;
      if(f.openLocal(_prefix+"_"+tex.sx+"x"+tex.sy+"_bgra.bin", IOS_OUT))
      {
         int y = 0;
         loop(tex.sy)
         {
            int x = 0;
            loop(tex.sx)
            {
               f.i32 = tex.getXY32(x++, y);
            }
            y++;
         }
      }
      f.close();
   }
}


String imgPrefix; foreach imgPrefix in [
   "x2_6_800x600_8x8swizzle",
   "x2_6_800x600_linear",
   "x2_6_128x96_8x8swizzle",
   "x2_6_128x96_linear",
                                        ] Convert(imgPrefix);
