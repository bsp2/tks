
use tksdl;
use tkopengl;

float frot=0;
int numframesrendered=0;

function onDraw() {
   glClearColor(rand(1.0f), rand(1.0f), rand(1.0f), 1.0f);
   glClear(GL_COLOR_BUFFER_BIT);
}

function onTimer() {
   trace "[dbg] onTimer called";

   Viewport.needRedraw();
}

function onKeyboard(Key _k) {
   switch(_k.pressed)
   {
      case VKEY_ESCAPE:
         SDL.exitEventLoop();
         break;
   }
}

function main() {
   Viewport.openWindow(640, 480);
   use callbacks;
   FPS.tickInterval=1000.0/60;
   // FPS.limit=30;
   FPS.limit=60;
   trace "xxx entering eventloop";
   SDL.redrawFlag = REDRAW_DIRTY;
   SDL.eventPolling = false;
   SDL.timerInterval = 500;
   SDL.eventLoop();
}
