
use tksdl;
use tkopengl;

int numframesrendered=0;

function onDraw() {
   float dt=FPS.precision;

   glClearColor(0,0,0.2,1);
   glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

   if( !(++numframesrendered&127) )
      trace "FPS.real="+FPS.real;

   glLoadIdentity();
   glFrustum(-200, 200,  /* left/right */
             -200, 200,  /* bottom/top */
             1, 200      /* near/far */
             );

   glTranslatef(0, 0, -1.0f);

   glColor3f(0.9,0.9,0.9);

   glBegin(GL_QUADS);
   glVertex2f(-200,  200);
   glVertex2f( 200,  200);
   glVertex2f( 200, -200);
   glVertex2f(-200, -200);
   glEnd();

}

function onKeyboard(Key _k) {
   switch(_k.pressed)
   {
      case VKEY_ESCAPE:
         SDL.exitEventLoop();
         break;
   }
}

function main() {
   Viewport.openWindow(640, 480);
   use callbacks;
   FPS.tickInterval=1000.0/60;
   // FPS.limit=30;
   FPS.limit=60;
   trace "xxx entering eventloop";
   SDL.eventLoop();
}
