/* -*- mode: tks -*-
 * http://www.bagley.org/~doug/shootout/ary3
 *
 * this program is modified from:
 *   http://cm.bell-labs.com/cm/cs/who/bwk/interps/pap.html
 * Timing Trials, or, the Trials of Timing: Experiments with Scripting
 * and User-Interface Languages</a> by Brian W. Kernighan and
 * Christopher J. Van Wyk.
 *
 * I added free() to deallocate memory.
 *
 * tks port written by Bastian Spiegel <bs@tkscript.de>.
 *   0.14s (amd athlon 2500+)
 *   2.04s (amd athlon 2500+, interpreted mode)
 */


#define N 7000
#define M 1000

int i, k;
IntArray x,y;
x.alloc(N); y.alloc(N); loop(N) y.add(0);
compile {
    int t=milliSeconds();
    for(i=0; i<N; i++)
	x[i]=i+1;
    loop(M) {
	for(i= N-1; i>=0; i--)
	    y[i] = y[i] + x[i];
    }

    t=milliSeconds()-t;
}
trace "t="+t;
trace y[0]+" "+y[N-1];

