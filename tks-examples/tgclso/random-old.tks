/* -*- mode: c -*-
 * $Id: random.gcc,v 1.16 2001/07/31 16:38:37 doug Exp $
 * http://www.bagley.org/~doug/shootout/random/
 * 
 * 0.457s (amd athlon 2500+)
 * 2.391s (amd athlon 2500+, interpreted mode)
 */

#define IM 139968
#define IA 3877
#define IC 29573

int t=milliSeconds();
int gen_random_last=42;
function gen_random(float max) {
    compile {
	gen_random_last = (gen_random_last * IA + IC) % IM;
	gen_random_last = ( tcint(max) * gen_random_last) / IM; /// xxx tcint..
    }
    return gen_random_last;
}

int N = 900000;
compile while (N--) {
    gen_random(100.0);
}
t=milliSeconds()-t;
trace "time(ms)="+t;
trace gen_random(100.0);
