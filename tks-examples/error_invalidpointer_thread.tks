
boolean b_running = false;

function ThreadEntry(local Thread _thread) {

   trace "thread: raise InvalidPointer exception:";

   while(b_running)
   {
      TKS.sleep(200);
      trace "thread: b_running="+b_running;

      try
      {
         String s <= null;
         trace s.length;
      }
      catch(Error e)
      {
         trace "thread: ok, caught error \""+e.name+"\" msg=\""+e.message+"\"";
      }
   }

   trace "thread: exit";
}


Thread thread;

thread.userdata = null;
b_running = true;
thread.create(ThreadEntry);

trace "call sleep:";
TKS.sleep(500);
// _Debug();
trace "wait for thread:";
b_running = false;
thread.wait();

trace "exit";
