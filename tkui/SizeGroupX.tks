// ----
// ---- file   : SizeGroupX.tks
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2008-2024 by Bastian Spiegel. 
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See 
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : 
// ----
// ---- created: 12Apr2008 
// ---- changed: 05Jan2010, 19Dec2011, 04Jan2012, 22Mar2024
// ----          
// ----
// ----

module MSizeGroupX;

namespace ui;


class SizeGroupX extends SizeGroup {

   public method layoutMembers(PointerArray _layers) { 
      layoutMembersX(_layers);
   }

   protected method layoutMembersX(PointerArray _layers) { 
      // trace "xxx SizeGroupX::layoutMembersX:";
    
      float totalMinSizeX = 0;
      Layer *l;

      // Sweep and determine widest layer
      foreach l in _layers 
      {
         float minSx = l.getSizeX();
         // trace "xxx SizeGroupX::layoutMembersX: l="+#(l)+" sx="+minSx;
         if(minSx > totalMinSizeX)
            totalMinSizeX = minSx;
      }

      // trace "xxx SizeGroupX: totalMinSizeX="+totalMinSizeX;
      
      // Adjust sizes of all other layers
      foreach l in _layers 
      {
         // trace "xxx apply sgx="+#(this)+": l="+l.getDebugString()+" sx="+totalMinSizeX;
         l.setRequiredSizeX(totalMinSizeX);
         // // l.setMinimumSizeX(totalMinSizeX);  // [12Mar2024] test23e.gr debug
      }
   }
}
