// ----
// ---- file   : AcceleratorKey.tks
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2007-2017 by Bastian Spiegel. 
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See 
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : This is part of the "ui" toolkit.
// ----
// ---- changed: 19May2007, 08Jan2008, 05Jun2017
// ----          
// ----
// ----

module MAcceleratorKey;

namespace ui;


class AcceleratorKey {

   protected String key_name; // e.g. "lalt-f", "lctrl-z"
   protected Layer *consumer; // xxx should be AcceleratorKeyConsumer ?!

   public static New(String _name, Layer _consumer) : AcceleratorKey {
      local AcceleratorKey k;
      k.setKeyName(_name);
      k.consumer <= deref _consumer;
      return deref k;
   }

   public method setKeyName(String _name) {
      key_name = _name;
   }

   public method getKeyName() : String {
      return key_name;
   }

   public method isKey(Key _k) : boolean {
      Key k = _k;
      k.mod = k.mod & ~VMOD_CAPS;

      // if(k.name == key_name)
      //    trace "xxx checkKey k.name="+k.name+" this="+key_name;

      return (k.name == key_name);
   }

   public method callConsumer() {
      if(consumer instanceof Layer)
      {
         consumer.onAcceleratorKey(this);
      }
   }

}

