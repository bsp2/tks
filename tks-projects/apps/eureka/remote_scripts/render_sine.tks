// $ tks -ep lib:rs render_sine [sample_name]
String script <= ~;
// -------------------------------------------------------------------
if(API.IsMonoSample("SMP"))
{
   var smpDat = API.FindSampleData("SMP");
   var w = 2PI * API.FindSampleFrameStep("SMP", 5*12/*note=C-5*/);  // sine phase increment
   var a = 0;        // sine phase
   var cLvl = 1.0f;  // linear volume ramp down (0dB at sample start .. -inf dB at the end)
   var sLvl = 1.0f / smpDat.numElements;
   var i = 0;
   loop(smpDat.numElements)
   {
      smpDat[i++] = sin(a) * cLvl;
      a += w;
      cLvl -= sLvl;
   }
   trace "[...] rendered "+smpDat.numElements+" frames to mono sample \"SMP\"";
   API.SelectSample("SMP");
}
// -------------------------------------------------------------------
~;;
script.replace("SMP", Arguments.getDefault(0, "render_sine"));
trace RemoteScriptClient.EvalString("audio", script);
