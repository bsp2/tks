// ----
// ---- file   : NT_ManageColumnsFilter.tks
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2012-2016 by Bastian Spiegel.
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : This is part of the "syntracker" midi sequencer.
// ----
// ---- created: 06Feb2012
// ---- changed: 07Feb2012, 12Feb2012, 13Feb2012, 14Apr2013, 25Jul2016
// ----
// ----
// ----


module MNT_ManageColumnsFilter;

use namespace ui;


class NT_ManageColumnsFilter {
   boolean b_show_visible;         // = show entries, that are already visible (cel exists and is visible)
   boolean b_show_unmapped;        // = show entries, that are invisible and/or unmapped
   boolean b_show_stdctl;          // = show std controllers
   boolean b_show_usrctl;          // = show usrctl
   boolean b_show_usrctl_unmapped; // = show usrctl even if it is not mapped to a generator parameter
   boolean b_show_midictl_cc;      // = show MIDI CC list
   boolean b_show_midictl_rpn;     // = show MIDI RPN list
   boolean b_show_midictl_nrpn;    // = show MIDI NRPN list

   public method init() {
      b_show_visible          = true;
      b_show_unmapped         = false;
      b_show_stdctl           = true;
      b_show_usrctl           = true;
      b_show_usrctl_unmapped  = false;
      b_show_midictl_cc       = true;
      b_show_midictl_rpn      = true;
      b_show_midictl_nrpn     = true;
   }

   public method saveStream(Stream _ofs) {
      _ofs.i8 = 1; // version

      _ofs.i8 = b_show_visible;
      _ofs.i8 = b_show_unmapped;
      _ofs.i8 = b_show_stdctl;
      _ofs.i8 = b_show_usrctl;
      _ofs.i8 = b_show_usrctl_unmapped;
      _ofs.i8 = b_show_midictl_cc;
      _ofs.i8 = b_show_midictl_rpn;
      _ofs.i8 = b_show_midictl_nrpn;
   }

   public method loadStream(Stream _ifs) : boolean {
      byte ver = _ifs.i8; // version

      if(ver >= 1)
      {
         b_show_visible         = _ifs.b8;
         b_show_unmapped        = _ifs.b8;
         b_show_stdctl          = _ifs.b8;
         b_show_usrctl          = _ifs.b8;
         b_show_usrctl_unmapped = _ifs.b8;
         b_show_midictl_cc      = _ifs.b8;
         b_show_midictl_rpn     = _ifs.b8;
         b_show_midictl_nrpn    = _ifs.b8;

         return true;
      }
      else
      {
         trace "[---] NT_ManageColumnsFilter::loadStream: invalid version ("+ver+")";
      }
      return false;
   }

}
