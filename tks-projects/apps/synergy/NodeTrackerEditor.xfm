<!--
// ---- file   : NodeTrackerEditor.xfm
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2006-2025 by Bastian Spiegel.
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : This is part of the "syntracker" midi/audio sequencer.
// ----
// ---- created: 14Sep2006
// ---- changed: .., .., ..,
// ----          29Jan2010, 25Feb2010, 01Mar2010, 24Apr2010, 29Apr2010, 01May2010, 02May2010
// ----          03May2010, 14May2010, 16May2010, 04Jul2010, 06Jul2010, 21Jul2010, 19Oct2010
// ----          17Feb2011, 20Feb2011, 25Feb2011, 14Mar2011, 15Mar2011, 17Mar2011, 19Mar2011
// ----          02Apr2011, 11Jun2011, 04Jan2012, 09Jan2012, 16Jan2012, 17Jan2012, 19Jan2012
// ----          02Feb2012, 08Feb2012, 14Feb2012, 13May2012, 26Jun2012, 04Jan2013, 06Jan2013
// ----          28Feb2013, 09May2013, 10May2013, 15May2013, 25May2013, 29May2013, 31May2013
// ----          01Jun2013, 04Jun2013, 05Jun2013, 27Aug2013, 02Feb2014, 17Jan2015, 23Jan2015
// ----          26Jan2015, 27Jan2015, 28Jan2015, 30Jan2015, 01Feb2015, 03Feb2015, 07Feb2015
// ----          09Feb2015, 12Feb2015, 13Feb2015, 14Feb2015, 16Feb2015, 22Feb2015, 27Feb2015
// ----          28Feb2015, 01Mar2015, 02Mar2015, 04Mar2015, 06Mar2015, 08Mar2015, 09Apr2015
// ----          19Apr2015, 28Apr2015, 03May2015, 04May2015, 13May2015, 14May2015, 28Jul2015
// ----          11Sep2015, 25Sep2015, 26Sep2015, 29Sep2015, 02Oct2015, 03Oct2015, 22Oct2015
// ----          23Oct2015, 24Oct2015, 25Oct2015, 26Oct2015, 29Oct2015, 05Nov2015, 17Nov2015
// ----          17Dec2015, 30Dec2015, 19Jan2016, 30Jan2016, 28Mar2016, 31Mar2016, 19Sep2016
// ----          15Oct2016, 25Nov2016, 28Jan2017, 08Feb2017, 09Feb2017, 10Feb2017, 13Feb2017
// ----          26Feb2017, 04Mar2017, 05Mar2017, 20Mar2017, 18Apr2017, 01May2017, 22May2017
// ----          27May2017, 05Jun2017, 01Jul2017, 14Jul2017, 01Sep2017, 04Oct2017, 12Oct2017
// ----          29Oct2017, 06Mar2018, 15Apr2018, 23May2018, 24May2018, 24Jun2018, 13Nov2018
// ----          30Nov2018, 10Jan2019, 12Jan2019, 13Jan2019, 01Mar2019, 27Aug2019, 22Sep2019
// ----          07Oct2019, 20Oct2019, 22Oct2019, 23Oct2019, 30Oct2019, 01Nov2019, 08May2020
// ----          09May2020, 24Oct2020, 26Oct2020, 08Nov2020, 26Jan2021, 13May2021, 21Jul2021
// ----          01Oct2021, 19Apr2022, 06May2022, 07May2022, 08May2022, 23Jun2022, 11Feb2023
// ----          20Feb2023, 05Oct2023, 06Oct2023, 22Oct2023, 27Oct2023, 01Nov2023, 02Nov2023
// ----          10Nov2023, 14Nov2023, 16Nov2023, 02Dec2023, 03Feb2024, 01Oct2024, 02Oct2024
// ----          28Feb2025, 07Jun2025, 12Jun2025, 13Jun2025
// ----
// ----
// ----
-->
<xfm align=expand>
  <Panel dir=TOP align=expand padding=0;2;0;2>

    <!-- Pattern selection and length, KeyJazz settings, zoom, .. -->
    <Panel dir=TOP align=expandx reqSizeY=1 tint=#40000000 alpha=255/>
    <Panel dir=TOP align=expandx reqSizeY=1 tint=#a0000000 alpha=255/>
    <Panel align=expandx dir=TOP padTop=0>

      <Panel dir=RIGHT id=pn_mode padLeft=2 padRight=2 padBottomUnscaled=2>

        <SizeGroupX id=sg_mode/>

        <Panel dir=TOP>
          <NT_ModeButton id=bt_mode_metronome  dir=LEFT caption="M" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="MIDI Metronome\n\n (note) F12\n\n (note) requires metronome MIDI device (see Prefs)"
                         />
          <NT_ModeButton id=bt_mode_kj         dir=LEFT caption="K" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="KeyJazz\n\n (note) lctrl-F12"
                         />
          <NT_ModeButton id=bt_mode_piano      dir=LEFT caption="p" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Piano Widget\n\n (note) lctrl-x `  (^ on german kbd)"
                         />
          <NT_ModeButton id=bt_mode_envelope   dir=LEFT caption="e" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Envelope View\n\n (note) lctrl-lshift-TAB"
                         />
          <NT_ModeButton id=bt_mode_recdur     dir=LEFT caption="D" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Record CTL_DURn\n\n (note) lctrl-x /   ('-' on german kbd)"
                         />
          <NT_ModeButton id=bt_mode_recquant   dir=LEFT caption="Q" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Record Quantization\n\n (note) lctrl-x RETURN"
                         />
          <NT_ModeButton id=bt_mode_recnoteoff_replay dir=LEFT caption="o" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Record Note Off only during Replay"
                         />
          <NT_ModeButton id=bt_mode_recnoteoff dir=LEFT caption="O" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Record Note Off\n\n (note) lctrl-x RSHIFT"
                         />
          <NT_ModeButton id=bt_mode_timinglock dir=LEFT caption="g" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Timing View Move-Lock\n\n (note) lctrl-lshift \\  (lctrl-< on german kbd)"
                         />
          <NT_ModeButton id=bt_mode_timing     dir=LEFT caption="G" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Timing View\n\n (note) lctrl-\\  (lctrl-< on german kbd)"
                         />
        </Panel>

        <Panel dir=TOP>
          <NT_ModeButton id=bt_mode_recusrctlnoteon dir=LEFT caption="N" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Record UsrCtl at note-on\n\n (note) lctrl-x ."
                         />
          <NT_ModeButton id=bt_mode_kjnoteoff  dir=LEFT caption="k" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="KeyJazz Manual Note-Off"
                         />
          <NT_ModeButton id=bt_mode_reclatency dir=LEFT caption="Y" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Compensate Recording Latency\n\n (note) lctrl-x h"
                         />
          <NT_ModeButton id=bt_mode_tapmode    dir=LEFT caption="T" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Tap Mode\n\n (note) lctrl-x t (dialog) or lctrl-t (collapse to temp + start tap mode)"
                         />
          <NT_ModeButton id=bt_mode_chordclear dir=LEFT caption="C" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Chord Clear-Step\n\n (note) lctrl-x o"
                         />
          <NT_ModeButton id=bt_mode_chordadv   dir=LEFT caption="A" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Chord Advance"
                         />
          <NT_ModeButton id=bt_mode_followarr  dir=LEFT caption="F" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Edit Pattern Follows Replay\n\n (note) lctrl-x INSERT\n\n (note) global ignore-prgchg and follow-replay can both be toggled via lctrl-lshift-SPACE"
                         />
          <NT_ModeButton id=bt_mode_selectplay dir=LEFT caption="f" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Replay Follows Edit Pattern"
                         />
          <NT_ModeButton id=bt_mode_ignorearr  dir=LEFT caption="I" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Ignore Pattern PrgChg and Mutes (per-node setting)\n\n (note) lctrl-x BACKSPACE\n\n (note) global ignore-prgchg and follow-replay can both be toggled via lctrl-lshift-SPACE"
                         />
          <NT_ModeButton id=bt_mode_freerun    dir=LEFT caption="U" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Freerun"
                         />
        </Panel>

        <Panel dir=TOP padTop=1>
          <NT_ModeButton id=bt_mode_precount   dir=LEFT caption="P" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Record / Metronome Pre-Count\n\n (note) lctrl-x RCTRL"
                         />
          <NT_ModeButton id=bt_mode_kjlock     dir=LEFT caption="L" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="KeyJazz Lock\n\n (note) lctrl-x l"
                         />
          <NT_ModeButton id=bt_mode_swaplshift dir=LEFT caption="H" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Swap lshift INSERT/DELETE behaviour\n\n (note) lctrl-x DELETE"
                         />
          <NT_ModeButton id=bt_mode_playstepreset dir=LEFT caption="X" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Reset Replay after Step Play"
                         />
          <NT_ModeButton id=bt_mode_bookmark   dir=LEFT caption="B" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Goto Bookmark when replay stops\n\n (note) lctrl-x w"
                         />
          <NT_ModeButton id=bt_mode_wraparound dir=LEFT caption="W" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Cursor Wrap-around\n\n (note) lctrl-x r"
                         />
          <NT_ModeButton id=bt_mode_autoscroll dir=LEFT caption="S" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Autoscroll\n\n (note) lctrl-x q"
                         />
          <NT_ModeButton id=bt_mode_relshift   dir=LEFT caption="V" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Relative Shift\n\n (note) BACKSPACE"
                         />
          <NT_ModeButton id=bt_mode_rtrecord   dir=LEFT caption="R" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Realtime Recording\n\n (note) RSHIFT"
                         />
          <NT_ModeButton id=bt_mode_edit       dir=LEFT caption="E" sizeGroup=sg_mode fillBG=1
                         toolTipCaption="Edit\n\n (note) RCTRL"
                         />
        </Panel>
      </Panel>

      <SizeGroupY id=sgy_zoomicon/>

      <Label id=lb_zoomicon
             dir=LEFT
             iconScaleX=0.5 iconScaleY=0.5
             fillBG=1
             iconPlacement=CENTER
             textPlacement=CENTER
             innerPadding=0;0;0;0
             reqSizeXScaled=35
             reqSizeYScaled=38
             padLeft=2
             sizeGroup=sgy_zoomicon
             />

      <Panel dir=LEFT sizeGroup=sgy_zoomicon>
        <Panel align=left dir=TOP padTop=2>

          <Panel dir=LEFT align=baseline>
            <!-- Pattern length -->
            <Panel dir=RIGHT align=baseline>
              <FloatParam id=fp_patlen
                          dir=LEFT
                          align=baseline
                          value=16 precision=0
                          min=0 max=64 maxLimit=65536 rangeMinEditable=0 rangeMaxEditable=1
                          reset=16;32
                          presets=4;6;8;12;16;24;32;48;64
                          stepFine=1 stepCoarse=1
			  textAlign=RIGHT
                          cols=3
                          toolTipCaption="Pattern length (#steps)\n\n (note) the displayed length depends on the current zoom level\n (note) the actual replay length will be aligned to \"off / len\" scaling value (see \'Play\' tab)\n (note) lctrl-l: enter length\n\n (note) lctrl-lshift-l: set pattern length to cursor\n\n (note) the default pattern length can be set via STConfig.node_tracker_initial_pattern_length_16th"
                          provideUnchanged=1
                          progressLog=1
                          />

              <Label dir=LEFT
                     align=baseline
                     fillBG=0
                     caption="Len:"
                     textPlacement=RIGHT
                     padLeft=4
                     />
            </Panel>

            <!-- Instrument -->
            <Panel dir=RIGHT align=baseline>
              <CheckBox id=cb_write_instrnr
                        dir=LEFT
                        align=baseline
                        bgcolor=window_bg
                        tint=#18000000
                        toolTipCaption="Enable write instrument\n\nWhen checked, store current instrument number in CTL_INSTR envelope when recording a note-on"
                        selected=1
                        setkbdfocusonmouse=0
                        padding=0;2;0;2
                        />
              <TextFieldIncDec id=tf_kj_instrument
                               dir=LEFT
                               align=baseline
                               cols=12
                               maxCols=96
                               text="1 Rotary Organ (Juno-G)"
                               toolTipCaption="KeyJazz instrument\n\n (note) lshift-f\n\n (note) lctrl-[: select previous instrument (ü on german kbd)\n (note) lctrl-]: select next instrument (+ on german kbd)"
			       />
              <Label dir=LEFT
                     align=baseline
                     fillBG=0
                     caption="Ins:"
                     textPlacement=RIGHT
                     padLeft=4
                     />
            </Panel>

            <!-- Octave shift -->
            <Panel dir=RIGHT align=baseline>
              <Label dir=RIGHT
                     align=baseline
                     fillBG=0
                     caption="Oct:"
                     />
              <FloatParam id=fp_kj_octave
                          dir=RIGHT
                          align=baseline
                          value=4 min=0 max=8 precision=0 stepFine=1 stepCoarse=1 cols=1
                          reset=4;5;3
                          presets=1;2;3;4;5;6;7
			  textAlign=RIGHT
                          toolTipCaption="KeyJazz octave\n\n (note) F2/F1 to inc/dec"
                          provideUnchanged=1
                          />
            </Panel>

            <!-- Note-on Velocity -->
            <Panel dir=RIGHT align=baseline>
              <Label dir=RIGHT
                     align=baseline
                     fillBG=0
                     caption="On:"
                     padLeft=4
                     />
              <FloatParam id=fp_kj_velocity
                          dir=RIGHT
                          align=baseline
                          value=64 min=0 max=128 precision=0 display=hex stepFine=1 stepCoarse=16
                          reset=64;128
                          presets=16;32;48;64;80;96;112;128
                          cols=3
			  textAlign=RIGHT
                          toolTipCaption="Note on velocity\n\n (note) lshift-w"
                          provideUnchanged=1
                          />
              <CheckBox id=cb_write_velocity
                        dir=RIGHT
                        align=baseline
                        bgcolor=window_bg
                        tint=#18000000
                        nocaption=1
                        selected=1
                        toolTipCaption="Enable write note-on velocity\n\nWhen checked, store velocity in CTL_VEL[1..5] envelope when recording a note-on (previous node output or step edit)\n\n (note) note on velocity is always recorded in realtime recording mode"
                        setkbdfocusonmouse=0
                        padding=0;2;0;0
                        />
              <CheckBox id=cb_addnotecel_vel
                        dir=RIGHT
                        align=baseline
                        nocaption=1
                        bgcolor=window_bg
                        tint=#18000000
                        toolTipCaption="When checked, create CTL_VELn cel when adding new note cel"
                        selected=0
                        setkbdfocusonmouse=0
                        padding=0;2;0;0
                        />
            </Panel>

            <!-- Duration -->
            <Panel dir=RIGHT align=baseline>
              <Label dir=RIGHT
                     align=baseline
                     fillBG=0
                     caption="Dur:"
                     textPlacement=RIGHT
                     />
              <FloatParam id=fp_kj_duration
                          dir=RIGHT
                          align=baseline
                          value=24 min=0 max=255 precision=0 display=hex stepFine=1 stepCoarse=1
                          reset=6;12
                          presets=3;6;12;16;18;24;32;48;64
			  textAlign=RIGHT
                          cols=3
                          toolTipCaption="Note duration\n\n (note) This value will be multiplied by 'Duration Scale' (see Play view)\n\n (note) lshift-d"
                          provideUnchanged=1
                          />
              <CheckBox id=cb_write_duration
                        dir=RIGHT
                        align=baseline
                        bgcolor=window_bg
                        tint=#18000000
                        nocaption=1
                        toolTipCaption="Enable write default duration\n\nWhen checked, store default note duration in CTL_DUR envelope when recording a note-on\n\n (note) This is a fallback value when note-off or CTL_DUR recording is disabled, or when step-editing a pattern"
                        selected=0
                        setkbdfocusonmouse=0
                        padding=0;2;0;0
                        />
              <CheckBox id=cb_addnotecel_dur
                        dir=RIGHT
                        align=baseline
                        nocaption=1
                        bgcolor=window_bg
                        tint=#18000000
                        toolTipCaption="When checked, create CTL_DURn cel when adding new note cel"
                        selected=0
                        transparent=1
                        setkbdfocusonmouse=0
                        padding=0;2;0;0
                        />
            </Panel>

            <!-- Note-off Velocity -->
            <Panel dir=RIGHT align=baseline>
              <Label dir=RIGHT
                     align=baseline
                     fillBG=0
                     caption="Off:"
                     />
              <FloatParam id=fp_kj_offvelocity
                          dir=RIGHT
                          align=baseline
                          value=64 min=0 max=128 precision=0
                          reset=0;64;128
                          presets=0;16;32;48;64;80;96;112;128
                          stepFine=1 stepCoarse=16
                          display=hex
			  textAlign=RIGHT
                          provideUnchanged=1
                          cols=3
                          toolTipCaption="Note off velocity"
                          />
              <CheckBox id=cb_write_offvelocity
                        dir=RIGHT
                        align=baseline
                        bgcolor=window_bg
                        tint=#18000000
                        nocaption=1
                        toolTipCaption="Enable write noteoff velocity\n\nWhen checked, store velocity in CTL_VEL[1..5] envelope when recording a note-off"
                        selected=0
                        setkbdfocusonmouse=0
                        padding=0;2;0;2
                        />
            </Panel>

            <!-- Zoom -->
            <Panel dir=RIGHT align=baseline padLeft=4>
              <!-- Zoom -->
              <Label dir=RIGHT
                     align=baseline
                     fillBG=0
                     caption="Zoom:"
                     textPlacement=RIGHT
                     />
              <FloatParamTicks id=fp_stepresolution
                               dir=RIGHT
                               align=baseline
                               value=24
                               precision=0
                               min=1 maxEditable=1 max=384
                               reset=3;48
                               presets=3;6;12;24;48;96;192;384;768
                               progressLog=1
                               stepFine=1 stepCoarse=2 cols=2
			       textAlign=RIGHT
                               provideUnchanged=1
                               toolTipCaption="Number of ticks per step (Zoom / Step Resolution)\n\n (note) lshift-a\n (note) toggle zoom presets with '\'' (us/en) / 'Ä' (de), or 'f' key"
                               />
            </Panel>

          </Panel>

          <!-- Pattern nr. -->
          <Panel dir=LEFT align=baseline>
            <LayerSwitch dir=LEFT reqSize=1;1 align=baseline collapse=1>
              <Spacer collapse=1/>
              <!-- for Push -->
              <ComboBox id=cm_mmc_patnr_group
                        name="Pat.Group"
                        dir=LEFT
                        align=baseline
                        toolTipCaption="Currently edited pattern (group)"
                        reverseWheelDir=1
                        reqSize=1;1
                        />
              <ComboBox id=cm_mmc_patnr_sub
                        name="Pat.Sub"
                        dir=LEFT
                        align=baseline
                        toolTipCaption="Currently edited pattern (sub)"
                        reverseWheelDir=1
                        reqSize=1;1
                        />
            </LayerSwitch>
            <ComboBox id=cm_patnr
                      name="Pat.Nr"
                      dir=LEFT
                      align=baseline
                      toolTipCaption="Currently edited pattern\n\n (note) lctrl-g\n\n (note) lctrl-HOME: select next pattern (group)\n (note) lctrl-lshift-HOME: select next pattern (sub)\n (note) lctrl-END: select previous pattern (group)\n (note) lctrl-lshift-END: select previous pattern (sub)\n\n (note) lctrl-x d: show pattern manager"
                      reverseWheelDir=0
                      />

            <Label dir=LEFT
                   align=baseline
                   fillBG=0
                   caption="Pat:"
                   textPlacement=RIGHT
                   padLeft=1
                   />
          </Panel>

        </Panel> <!-- end widgets -->

        <!-- menu bar -->
        <Panel align=LEFT dir=TOP padTop=0 sizex=100%>

          <TextField id=tf_pat_name
                     name="Name"
                     dir=RIGHT
                     align=baseline
                     cols=7
                     baselineContentShift=1
                     toolTipCaption="Pattern name\n\n (note) lshift-n"
                     borders=hidpi?0
                     />

          <Button id=bt_keyjazz
                  dir=RIGHT
                  align=baseline
                  caption="KJ"
                  toggle=1 toggleState=1
                  toolTipCaption="When enabled, computer keyboard can be used to play/record notes.\n\nWhen disabled, keyjazz keys are handled as usual (e.g. go to previous/parent page, ..)\n\n (note) lctrl-F12"
                  fillBG=1
                  labelButton=1
                  bgTint=#10000000
                  toggleTint=#18c3ff82
                  baselineContentShift=1
                  padLeft=4
                  setkbdfocusonmouse=0
                  />

          <Button id=bt_follow
                  dir=RIGHT
                  align=baseline
                  caption="FL"
                  toggle=1 toggleState=0
                  toolTipCaption="When enabled, do not ignore prgchg events and make edit pattern follow replay pattern\n\n (note) this is especially useful when editing multi-pattern sequences that are controlled by an Arranger node\n\n (note) lctrl-lshift-SPACE"
                  fillBG=1
                  labelButton=1
                  bgTint=#10000000
                  toggleTint=#18c3ff82
                  baselineContentShift=1
                  padLeft=4
                  setkbdfocusonmouse=0
                  />

          <!--
              <CheckBox id=cb_mmcrec dir=RIGHT caption="MMC" selected=0
                        toolTipCaption="When enabled, send MIDI machine control \'record\' command when recording starts\n\n (note) this will be sent to all devices for which \'Rec\' is enabled (see MIDI devices page)\n\n(note) This auto-resets to unchecked after record is started. This behaviour can be changed using in the \'auto-reset\' option in the \'Replay\' menu\n\n (note) use F11 to toggle\n\n (todo) remove this, it's been superceded by lshift-numpad ENTER (or statusbar 'play' hold-click)"
                        fillBG=0
                        />
              -->

              <Label id=lb_playpat dir=LEFT padLeft=4 captionSizeReserve="31D / 31D"
                     toolTipCaption="Current play pattern (and queued pattern)"
                     align=baseline
                     fillBG=1
                     bgTint=#18000000
                     />
              <Button id=bt_view_arp dir=LEFT padLeft=4 caption="Arp"
                      toolTipCaption="Show 'arp' view\n\n (note) Cycle between Pattern/Play/Arp views with lctrl-x TAB"
                      labelButton=1
                      align=baseline
                      baselineContentShift=1
                      />
              <Button id=bt_view_play dir=LEFT padLeft=4 caption="Play"
                      toolTipCaption="Show 'play' view\n\n (note) Cycle between Pattern/Play/Arp views with lctrl-x TAB"
                      labelButton=1
                      align=baseline
                      baselineContentShift=1
                      />
              <Button id=bt_view_instruments dir=LEFT padLeft=4 caption="Instruments"
                      toolTipCaption="Show instrument view\n\n (note) Cycle between Pattern/Instrument views with lctrl-TAB"
                      labelButton=1
                      align=baseline
                      baselineContentShift=1
                      />
              <Button id=bt_view_pattern dir=LEFT padLeft=20 caption="Pattern"
                      toolTipCaption="Show pattern view\n\n (note) Cycle between Pattern/Instrument views with lctrl-TAB\n\n (note) hold-click to toggle pattern manager (lctrl-x d)"
                      labelButton=1
                      hold=1
                      align=baseline
                      baselineContentShift=1
                      />
              <PopupMenuBar id=menubar
                            dir=LEFT
                            useProvide=1
                            globalAcceleratorList=0
                            align=centerY
                            >

                <!-- Edit menu -->
                <PopupMenu caption="\aEdit">
                  <PopupMenuCheckButton id=pmcb_edit_patternedit caption="Pattern edit mode"
			                altAcceleratorKey="rctrl"
			                actionName="edit_togglemode"
			                toolTipCaption="When checked, allow pattern to be edited."
			                />
                  <PopupMenuCheckButton id=pmcb_edit_shiftall caption="Relative shift mode" acceleratorKey="backspace" altAcceleratorKey="lshift-rctrl" actionName="edit_toggleshiftmode"
			                toolTipCaption="When checked, deleting an event will only shift the next event.\n Inserting some space (INSERT) will also only shift the next event.\n\nWhen unchecked, deleting events/inserting space will shift all following events.\n\nNote: The cursor will turn yellow if relative shift mode is enabled (and the pattern is editable)."
			                />
                  <PopupMenuSeparator/>

                  <PopupMenu caption="Zoom">
                    <PopupMenuButton caption="Zoom in" acceleratorKey="lctrl-WHEELUP" altAcceleratorKey="lshift-]" actionName="edit_zoomin"/>
                    <PopupMenuButton caption="Zoom out" acceleratorKey="lctrl-WHEELDOWN" altAcceleratorKey="lshift-[" actionName="edit_zoomout"/>
                    <PopupMenuButton caption="Toggle Zoom Preset" altAcceleratorKey="\'" acceleratorKey="f" actionName="edit_togglezoompreset"
                                     toolTipCaption="Toggle Zoom Preset\n\n (note) see config options node_tracker_zoom_preset_1/2"
                                     />
                    <PopupMenuButton caption="Enter step resolution" acceleratorKey="lshift-a" actionName="edit_enterstepresolution"
		                     toolTipCaption="Enter step resolution\n\n  (note) This will set the keyboard focus to the step resolution widget"
		                     />
                    <PopupMenu caption="Set zoom">
                      <PopupMenuButton id=pmb_edit_zoom_1_32t autoresolve=0 caption="1/32t" actionName="edit_zoom_1_32t" />
                      <PopupMenuButton id=pmb_edit_zoom_1_32  autoresolve=0 caption="1/32"  actionName="edit_zoom_1_32t" />
                      <PopupMenuButton id=pmb_edit_zoom_1_16t autoresolve=0 caption="1/16t" actionName="edit_zoom_1_16t" />
                      <PopupMenuButton id=pmb_edit_zoom_1_16  autoresolve=0 caption="1/16"  actionName="edit_zoom_1_16"  />
                      <PopupMenuButton id=pmb_edit_zoom_1_8t  autoresolve=0 caption="1/8t"  actionName="edit_zoom_1_8t"  />
                      <PopupMenuButton id=pmb_edit_zoom_1_8   autoresolve=0 caption="1/8"   actionName="edit_zoom_1_8"   />
                      <PopupMenuButton id=pmb_edit_zoom_1_4t  autoresolve=0 caption="1/4t"  actionName="edit_zoom_1_4t"  />
                      <PopupMenuButton id=pmb_edit_zoom_1_4   autoresolve=0 caption="1/4"   actionName="edit_zoom_1_4"   />
                    </PopupMenu>
                  </PopupMenu>
                  <PopupMenuButton caption="Enter default note duration" acceleratorKey="lshift-d" actionName="edit_enternoteduration"
		                   toolTipCaption="Enter default note duration\n\n  (note) This will set the keyboard focus to the note duration widget"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Set step advance">
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_0 autoresolve=0 caption="0 steps" acceleratorKey="lctrl-0" actionName="edit_stepadvance_0"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_1 autoresolve=0 caption="1 step" acceleratorKey="lctrl-1" actionName="edit_stepadvance_1"/>
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_2 autoresolve=0 caption="2 steps" acceleratorKey="lctrl-2" actionName="edit_stepadvance_2"/>
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_3 autoresolve=0 caption="3 steps" acceleratorKey="lctrl-3" actionName="edit_stepadvance_3"/>
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_4 autoresolve=0 caption="4 steps" acceleratorKey="lctrl-4" actionName="edit_stepadvance_4"/>
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_5 autoresolve=0 caption="5 steps" acceleratorKey="lctrl-5" actionName="edit_stepadvance_5"/>
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_6 autoresolve=0 caption="6 steps" acceleratorKey="lctrl-6" actionName="edit_stepadvance_6"/>
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_7 autoresolve=0 caption="7 steps" acceleratorKey="lctrl-7" actionName="edit_stepadvance_7"/>
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_8 autoresolve=0 caption="8 steps" acceleratorKey="lctrl-8" actionName="edit_stepadvance_8"/>
                    <PopupMenuRadioButton id=pmrb_edit_stepadv_9 autoresolve=0 caption="<next event>" acceleratorKey="lctrl-9" actionName="edit_stepadvance_nextevent"/>

                  </PopupMenu>
                  <PopupMenu caption="Set microshift ticks">
                    <PopupMenuRadioButton id=pmrb_edit_microshift_0 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-0" actionName="edit_microshift_0"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_microshift_1 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-1" actionName="edit_microshift_1"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_microshift_2 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-2" actionName="edit_microshift_2"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_microshift_3 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-3" actionName="edit_microshift_3"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_microshift_4 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-4" actionName="edit_microshift_4"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_microshift_5 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-5" actionName="edit_microshift_5"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_microshift_6 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-6" actionName="edit_microshift_6"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_microshift_7 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-7" actionName="edit_microshift_7"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_microshift_8 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-8" actionName="edit_microshift_8"
			                  />
                    <PopupMenuRadioButton id=pmrb_edit_microshift_9 autoresolve=0 caption="0 ticks" acceleratorKey="lctrl-lshift-9" actionName="edit_microshift_9"
			                  />
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenuCheckButton id=pmcb_edit_advanceallnotesreleased caption="Chord advance mode"
			                actionName="edit_toggleadvanceallnotesreleased"
			                toolTipCaption="When checked, only advance/scroll down once all MIDI note keys have been released\n\nWhen unchecked, advance/scroll down each time a MIDI note event has been recorded"
			                />
                  <PopupMenuCheckButton id=pmcb_edit_chordclearstep caption="Chord clear-step mode"
			                actionName="edit_chordclearstep"
			                toolTipCaption="When checked, clear current step before recording first note in step edit mode"
                                        altAcceleratorKey="lctrl-x o"
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Tap mode.." acceleratorKey="lctrl-x t" actionName="edit_tapmode"
		                   toolTipCaption="Start/Toggle tap mode"/>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Detail edit value.." acceleratorKey="lctrl-f" actionName="edit_detail"
		                   toolTipCaption="Show detail edit dialog.\n\nHint: Use right mouse click to detail-edit cels without changing the cursor position.\n\n (note) The type of edit dialog depends on the cel type (e.g. on CTL_INSTR cels, this will show the instruments manager)"/>
                  <PopupMenuButton caption="Toggle note on/off or detail edit value.." acceleratorKey="lctrl-z" actionName="edit_togglenoteonoffordetailedit"
		                   toolTipCaption="When the cursor is placed on a note column, this will toggle note on/off.\nWhen the cursor is placed on any other controller, this will open the detail edit dialog.\n\n (note) lctrl-y on german keyboards"/>
                  <PopupMenuButton caption="Toggle slide" acceleratorKey="lshift-s" actionName="edit_toggleslide_or_sort_notes"
		                   toolTipCaption="When the cursor is placed on a note-on, increase the duration of the previous note so it overlaps (slide on), or reset it to the default duration (slide off)\n\n (note) requires that there is no selection"/>
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Undo">
	            <PopupMenuButton caption="Undo"
			             acceleratorKey="lctrl-y"
			             actionName="edit_undo"
			             toolTipCaption="Undo last pattern modification(s)\n\n (note) While realtime recording is active, undo + restart recording"
			             />
	            <PopupMenuSeparator/>
	            <PopupMenuButton caption="Redo"
			             acceleratorKey="lctrl-lshift-y"
			             actionName="edit_redo"
			             toolTipCaption="Redo last undo modification(s)"
			             />
	            <PopupMenuSeparator/>
	            <PopupMenuButton caption="Clear undo history"
			             actionName="edit_undoempty"
			             toolTipCaption="Clear undo history"
			             />
	            <PopupMenuSeparator/>
	            <PopupMenuButton caption="Show undo stack (debug).." actionName="help_debugsubsongundo" active=0/>
	            <PopupMenuSeparator/>
	            <PopupMenuCheckButton id=pmcb_edit_undomode caption="Single transaction pattern recording"
			                  actionName="edit_undotogglemode"
			                  toolTipCaption="When checked, collect all modifications during pattern/song recording in one undo transaction.\n\nWhen unchecked, allow every single pattern modification to be undone.\n\n (note) please keep this one enabled"
			                  />
	            <PopupMenuCheckButton id=pmcb_edit_undodebug caption="Undo/redo debug messages"
			                  actionName="edit_undotoggledebug"
			                  toolTipCaption="When checked, print debug messages to console"
			                  />
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Toggle envelope view" acceleratorKey="lctrl-lshift TAB" actionName="edit_toggleenvelopeview"
		                   toolTipCaption="Show / hide envelope view"/>
                  <PopupMenuButton caption="Toggle piano widget" acceleratorKey="lctrl-x ^" actionName="edit_togglepianowidget"
		                   toolTipCaption="Show / hide piano widget"/>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Toggle timing view"
                                   altAcceleratorKey="lctrl-\\"
                                   actionName="edit_toggletimingview"
		                   toolTipCaption="Show / hide timing view\n\n (note) lctrl-< on german kbds"/>
                  <PopupMenuCheckButton id=pmcb_edit_timingviewmovelock caption="Timing view move-lock"
			                altAcceleratorKey="lctrl-lshift-\\"
			                actionName="edit_toggletimingview_movelock"
			                toolTipCaption="When checked, always move notes.\n\nWhen unchecked, modify note duration when dragging note start/end, and move when dragging note center."
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Show AudioDialog"
                                   altAcceleratorKey="lctrl-x a"
                                   actionName="edit_showaudiodialog"
		                   toolTipCaption="Show AudioDialog (requires Eureka process to be connected)"/>

                </PopupMenu>




                <!-- Cursor menu -->
                <PopupMenu caption="\aCursor">
                  <PopupMenuCheckButton id=pmcb_cursor_autoscroll caption="Auto-scroll mode" acceleratorKey="lctrl-x q" checked=1 actionName="cursor_autoscroll"
			                toolTipCaption="When checked, the cursor position follows the current replay position.\n\nWhen unchecked, it is independent of the current replay position."
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuCheckButton id=pmcb_cursor_wraparound caption="Wrap-around mode" acceleratorKey="lctrl-x r" checked=1 actionName="cursor_wraparound"
			                toolTipCaption="When checked, the cursor will jump back to the first step of a pattern after the last step has been edited.\n\nWhen unchecked, the cursor will be clamped to the first / last step."
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuCheckButton id=pmcb_cursor_doublecenter caption="Double center row" checked=1 actionName="cursor_doublecenter"
			                toolTipCaption="When checked, double the center row\n\nWhen unchecked, all rows will have the same height"
			                />
                  <PopupMenuCheckButton id=pmcb_cursor_doublewidth caption="Double width" actionName="cursor_doublewidth"
			                toolTipCaption="When checked, double the pattern char width\n\n (note) mostly useful in fullscreen mode"
			                />
                  <PopupMenuCheckButton id=pmcb_cursor_doubleheight caption="Double height" actionName="cursor_doubleheight"
			                toolTipCaption="When checked, double the pattern char height\n\n (note) mostly useful in fullscreen mode"
			                />
                  <PopupMenuCheckButton id=pmcb_cursor_timing_autodoublewidth caption="TimingView: Auto-Double Width" actionName="cursor_timing_autodoublewidth"
			                toolTipCaption="When checked, auto-double the pattern char width while the timing view is active"
			                />
                  <PopupMenuCheckButton id=pmcb_cursor_timing_autodoubleheight caption="TimingView: Auto-Double Height" actionName="cursor_timing_autodoubleheight"
			                toolTipCaption="When checked, auto-double the pattern char height while the timing view is active"
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuCheckButton id=pmcb_cursor_decimalpatoff caption="Decimal pattern offset" actionName="cursor_decimalpatoff"
			                toolTipCaption="When checked, show decimal pattern offset\n\nWhen unchecked, show hexadecimal pattern offset"
			                />
                  <PopupMenuCheckButton id=pmcb_cursor_shiftpatoff caption="Shift pattern offset" actionName="cursor_shiftpatoff"
			                toolTipCaption="When checked, pattern offset display starts with 1\n\nWhen unchecked, pattern offset display starts with 0"
			                />
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Move cursor [track]">
	            <PopupMenuButton caption="Move cursor to previous track" acceleratorKey="lshift-tab" actionName="cursor_movetoprevioustrack"/>
	            <PopupMenuButton caption="Move cursor to next track" acceleratorKey="tab" actionName="cursor_movetonexttrack"/>
                    <PopupMenuSeparator/>
	            <PopupMenuButton caption="Move cursor to first cel or previous track" acceleratorKey="lctrl-left" actionName="cursor_movetofirstorprevioustrack"/>
	            <PopupMenuButton caption="Move cursor to last cel or next track" acceleratorKey="lctrl-right" actionName="cursor_movetolastornexttrack"/>
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Move cursor [step]">
	            <PopupMenuButton caption="Move cursor up 1 step" acceleratorKey="up" actionName="cursor_moveuponestep"/>
	            <PopupMenuButton caption="Move cursor up $n steps / align" acceleratorKey="pageup" actionName="cursor_moveupnsteps"/>
	            <PopupMenuButton caption="Move cursor up $o steps" acceleratorKey="lctrl-up" actionName="cursor_moveuposteps"/>
	            <PopupMenuButton caption="Move cursor down 1 step" acceleratorKey="down" actionName="cursor_movedownonestep"/>
	            <PopupMenuButton caption="Move cursor down $n steps / align" acceleratorKey="pagedown" actionName="cursor_movedownnsteps"/>
	            <PopupMenuButton caption="Move cursor down $o steps" acceleratorKey="lctrl-down" actionName="cursor_movedownosteps"/>
                    <PopupMenuSeparator/>
	            <PopupMenuButton caption="Move cursor to first step" altAcceleratorKey="lshift-HOME" actionName="cursor_movetostart"/>
	            <PopupMenuButton caption="Move cursor to last step" altAcceleratorKey="lshift-END" actionName="cursor_movetoend"/>
                    <PopupMenuSeparator/>
	            <PopupMenuButton caption="Jump to step.." altAcceleratorKey="lshift-g" actionName="cursor_jumptostep"/>
                    <PopupMenuSeparator/>
	            <PopupMenuButton caption="Edit tick highlight modulo.." actionName="cursor_tickmodulo"/>
	            <PopupMenuButton caption="Edit step alignment.." actionName="cursor_stepalignment"
                                     toolTipCaption="Edit step alignment for PAGEUP / DOWN cursor movement"
                                     />
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Move cursor [cel]">
	            <PopupMenuButton caption="Move cursor to previous column" acceleratorKey="left" actionName="cursor_movetopreviouscolumn"/>
	            <PopupMenuButton caption="Move cursor to next column" acceleratorKey="right" actionName="cursor_movetonextcolumn"/>
	            <PopupMenuButton caption="Move cursor to previous column group" altAcceleratorKey="lctrl-lalt-left" actionName="cursor_movetopreviouscolumngroup"/>
	            <PopupMenuButton caption="Move cursor to next column group" altAcceleratorKey="lctrl-lalt-right" actionName="cursor_movetonextcolumngroup"/>
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Move cursor [event]">
	            <PopupMenuButton caption="Move cursor to previous event" altAcceleratorKey="lctrl-pageup" actionName="cursor_movetopreviousevent"/>
	            <PopupMenuButton caption="Move cursor to next event" altAcceleratorKey="lctrl-pagedown" actionName="cursor_movetonextevent"/>
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Select cel.." altAcceleratorKey="lctrl-x SPACE" acceleratorKey="lctrl-j" actionName="cursor_jumptocolumn"
		                   toolTipCaption="Opens a dialog that lets you select the current cel\n - Useful if a track has many controllers/cels"
		                   />
                </PopupMenu>




                <!-- Replay menu -->
                <PopupMenu caption="\aReplay">
                  <PopupMenuCheckButton id=pmcb_replay_selectandplay caption="Select + Play"
			                actionName="replay_selectandplay"
			                toolTipCaption="When checked, immediately play pattern when it is selected"
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Set replay pattern" acceleratorKey="lctrl-return" actionName="replay_pat"
		                   toolTipCaption="Set replay pattern to current edit pattern (+update replay range).\n\n (note) If the replay is running, selecting a pattern only selects it for editing\n\n (note) If the replay is NOT running, selecting a pattern selects it for both editing and playing"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Start Recording" acceleratorKey="rshift" actionName="replay_rec"
		                   toolTipCaption="Start Realtime Recording"
		                   />
                  <PopupMenuButton caption="Continue Recording" acceleratorKey="lctrl-rshift" actionName="replay_rec_cont"
		                   toolTipCaption="Continue Realtime Recording (from current step)"
		                   />
                  <PopupMenuButton caption="Stop/Play step OR Undo+Restart Recording" acceleratorKey="return" actionName="replay_stopplaystep"
		                   toolTipCaption="Play step or stop replay and leave cursor at last played position\n\n (note) This will also select the current edit pattern for replay\n\n (note) While realtime recording is active, undo+restart recording"
		                   />
                  <PopupMenuButton caption="Stop+Goto marker / Loop pattern" acceleratorKey="space" actionName="replay_stoplooppattern"
		                   toolTipCaption="Toggle pattern replay"
		                   />
                  <PopupMenuButton caption="Stop/Continue" acceleratorKey="lctrl-space" actionName="replay_continue"/>
                  <PopupMenuSeparator/>
                  <PopupMenuCheckButton id=pmcb_replay_invertspace caption="Stop + goto bookmark mode" checked=0 actionName="replay_invertspace" altAcceleratorKey="lctrl-x w"
			                toolTipCaption="When unchecked, pressing SPACE will stop the replay and leave the cursor at the current position.\n Pressing lctrl-SPACE will stop the replay and place the cursor at the bookmarked position.\n\nWhen checked, the SPACE and lctrl-SPACE key bindings are swapped."
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Set pattern replay offset" acceleratorKey="lshift-space" actionName="replay_setreplayoffset"
		                   toolTipCaption="Use this function to set the pattern replay offset to the current cursor position.\n\nNote: This only affects pattern replay and is meant as an editing aid."
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuCheckButton id=pmcb_replay_playstepreset caption="Note-Off after step play" checked=1 actionName="replay_playstepreset"
			                toolTipCaption="When checked, stop notes after single-step replay"
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Toggle pipe solo" actionName="replay_togglepipesolo"
			           toolTipCaption="Toggle pipe solo replay"
                                   acceleratorKey="lctrl-s"
			           />
                  <PopupMenuButton caption="Toggle pipe mute" actionName="replay_togglepipemute"
			           toolTipCaption="Toggle pipe mute replay"
                                   altAcceleratorKey="lctrl-lshift-s"
			           />
                  <PopupMenuButton caption="Toggle node solo" actionName="replay_togglenodesolo"
			           toolTipCaption="Toggle node solo replay"
                                   acceleratorKey="lctrl-d"
			           />
                  <PopupMenuButton caption="Toggle node mute" actionName="replay_togglenodemute"
			           toolTipCaption="Toggle node mute replay"
                                   acceleratorKey="lctrl-lshift-d"
			           />
                  <PopupMenuSeparator/>
                  <PopupMenuCheckButton id=pmcb_replay_freerun caption="Freerun Loop" checked=0 actionName="replay_freerun"
			                toolTipCaption="When checked, do not rewind nodes back to start when replay cycle loops.\n\nWhen unchecked, synchronize node loops with cycle loop\n\n  (note) Master nodes (first pipe) cannot use the freerun mode."
			                />
                  <PopupMenuCheckButton id=pmcb_replay_ignorearr caption="Ignore PrgChg/Seek/Mute during pattern replay/record" checked=0 actionName="replay_ignorearr"
			                toolTipCaption="When checked, ignore program change, RPN_COMMON_SEEK_OFFSET, and RPN_COMMON_MUTE_TEMP events during pattern replay\n\n (note) these events are usually sent by Arranger nodes and can get in the way when recording long patterns\n (note) this setting will only have an effect if the replay is started via SPACE, RSHIFT, or RETURN\n\n (note) ignore-prgchg and follow-replay can both be toggled via lctrl-lshift-SPACE"
                                        altAcceleratorKey="lctrl-x BACKSPACE"
			                />
                  <PopupMenuCheckButton id=pmcb_replay_followarr caption="Edit pattern follows replay pattern" checked=0 actionName="replay_followarr"
			                toolTipCaption="When checked, edit pattern follows replay pattern\n\n (note) useful when editing multi-pattern / multi-node sequences which are controlled by e.g. an arranger node\n\n (note) ignore-prgchg and follow-replay can both be toggled via lctrl-lshift-SPACE"
                                        altAcceleratorKey="lctrl-x INSERT"
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Clear MIDI cache" actionName="replay_clearmidicache"
		                   toolTipCaption="Clear MIDI cache\n\n (note) MIDI caches can be enabled/disabled per device\n\n (note) If the target device responds to the repeated reception of the same MIDI controller message(s), disable the MIDI cache for that device"
		                   />
                  <!--
                      <PopupMenuCheckButton id=pmcb_replay_mmcrec_autoreset caption="MMC Rec auto-reset" checked=1 actionName="replay_mmcrec_autoreset"
			                    toolTipCaption="When checked, auto-reset MMC rec checkbox to unchecked after recording was started\n\n (todo) remove this, superceded by lshift-numpad ENTER (statusbar play hold-click)"
			                    />
                      -->
                </PopupMenu>




                <!-- Track menu -->
                <PopupMenu caption="\aTrack">
                  <PopupMenuButton caption="New track.." actionName="track_new"
		                   toolTipCaption="Create a new track"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Delete track.." actionName="track_delete"
		                   toolTipCaption="Delete the current track"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Move track left" actionName="track_moveleft"
		                   toolTipCaption="Swap current/left-hand-side neighbor tracks"
		                   />
                  <PopupMenuButton caption="Move track right" actionName="track_moveright"
		                   toolTipCaption="Swap current/right-hand-side neighbor tracks"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Rename track.." actionName="track_rename"
		                   toolTipCaption="Rename current track\n\n(note) For multi-line tracknames, use the ',' character to separate lines\n\n (note) tracks can also be renamed by holding LMB on a track name in the PatternView"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Show">
	            <PopupMenuCheckButton id=pmcb_track_shownames caption="Show track names" checked=1 actionName="track_shownames"
			                  toolTipCaption="When checked, show track names"
			                  />
	            <PopupMenuCheckButton id=pmcb_track_showeq caption="Show equalizer" checked=1 actionName="track_showeq"
			                  toolTipCaption="When checked, draw soundtracker-style equalizers/analyzers/vu-meters"
			                  />
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Mute / Solo">
                    <PopupMenuButton caption="Mute/Unmute current track" acceleratorKey="lctrl-q" actionName="track_togglemute"
		                     />
                    <PopupMenuButton caption="Toggle solo current track" acceleratorKey="lctrl-w" actionName="track_togglesolo"/>
                    <PopupMenuButton caption="Mute all tracks" acceleratorKey="lctrl-lshift-q" actionName="track_muteall"/>
                    <PopupMenuButton caption="Unmute all tracks" acceleratorKey="lctrl-lshift-w" actionName="track_unmuteall"/>
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Edit track layout.." altAcceleratorKey="lctrl-x s" acceleratorKey="lshift-f6" actionName="track_editlayout"
		                   toolTipCaption="This will open a dialog that allows you to configure which controller cels are displayed for the current track"/>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Cel wizard.." actionName="track_managecolumns"
		                   toolTipCaption="Select/add/remove cels (and automatically delete env and/or map/unmap MIDI params/ctls)"
		                   />
                  <PopupMenuButton caption="Add cel.." altAcceleratorKey="lctrl-x i" actionName="track_addcel"
		                   toolTipCaption="Quickly add a single cel (and automatically map MIDI param/ctl)"
		                   />
                  <PopupMenu caption="Note cel">
                    <PopupMenuButton caption="Add note cel" altAcceleratorKey="lctrl-x n" actionName="track_addnotecel"
		                     toolTipCaption="Quickly add a note cel"
		                     />
	            <PopupMenuCheckButton id=pmcb_track_addnotecel_vel caption="Add note cel: CTL_VELn" checked=1 actionName="track_addnotecel_vel"
			                  toolTipCaption="When checked, also add velocity cel when adding new note cel"
			                  />
	            <PopupMenuCheckButton id=pmcb_track_addnotecel_dur caption="Add note cel: CTL_DURn" checked=1 actionName="track_addnotecel_dur"
			                  toolTipCaption="When checked, also add duration cel when adding new note cel"
			                  />
	            <PopupMenuCheckButton id=pmcb_track_addnotecel_autogroup caption="Add note cel: Auto-Group note,vel,dur" checked=1 actionName="track_addnotecel_autogroup"
			                  toolTipCaption="When checked, auto-group note,vel,dur cels when adding new note cel"
			                  />
                  </PopupMenu>
                  <PopupMenuButton caption="Remove cel.." actionName="track_removecel"
		                   toolTipCaption="Quickly remove a single cel (and automatically delete env and/or unmap MIDI param/ctl)"
		                   />
                  <PopupMenuButton caption="Toggle vel+dur cel styles" actionName="track_toggleveldurstyles"
		                   toolTipCaption="Toggle alternate velocity and duration cel styles"
                                   altAcceleratorKey="lctrl-x p"
		                   />
                  <PopupMenuButton caption="Toggle alternative cel styles" actionName="track_togglealtstyles"
		                   toolTipCaption="Toggle alternate cel styles\n\n (note) lctrl-x ü on german keyboards"
                                   altAcceleratorKey="lctrl-x ["
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Reverse / Rotate">
                    <PopupMenuButton caption="Reverse track" actionName="track_reverse"
                                     toolTipCaption="Reverse track steps"
                                     altAcceleratorKey="lshift-e"
                                     />
                    <PopupMenuSeparator/>
                    <PopupMenuButton caption="Rotate up" acceleratorKey="lshift-o" actionName="track_rotate_up"
                                     toolTipCaption="Rotate track up"
                                     />
                    <PopupMenuButton caption="Rotate down" acceleratorKey="lshift-p" actionName="track_rotate_down"
                                     toolTipCaption="Rotate track down"
                                     />
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Randomizer.." acceleratorKey="lctrl-x 0" actionName="track_randomdialog"
                                   toolTipCaption="Show Randomizer dialog"
                                   />
                  <PopupMenuSeparator/>
                  <PopupMenuCheckButton id=pmcb_track_lockkeyjazz altAcceleratorKey="lctrl-x l" caption="Lock keyjazz" checked=0 actionName="track_lockkeyjazz"
			                toolTipCaption="When enabled, always play keyjazz notes on this track\n\n(note) e.g. for editing controller tracks"
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuButton altAcceleratorKey="k" caption="Edit track sound" actionName="track_editsound"
			           toolTipCaption="Edit track(instrument) sound\n\n (note) SysEx, AnalogRytm, or Eureka sample / plugin\n\n (note) 'k'"
			           />
                </PopupMenu>




                <!-- Pattern menu -->
                <PopupMenu caption="\aPattern">
                  <PopupMenuButton caption="New pattern" acceleratorKey="lctrl-n" actionName="pattern_alloc"
                                   toolTipCaption="Find the first unused pattern (starting with the current one), and select it.\n\n (note) allocate new pattern group (1..32)"
                                   />
                  <PopupMenuButton caption="New pattern (sub)" acceleratorKey="lctrl-lshift-n" actionName="pattern_alloc_sub"
                                   toolTipCaption="Find the first unused pattern (starting with the current one), and select it.\n\n (note) allocate new sub-pattern (A..D)"
                                   />
                  <PopupMenuButton caption="Clone pattern" acceleratorKey="lctrl-r" actionName="pattern_clone"
                                   toolTipCaption="Allocate new pattern and duplicate the current one\n\n (note) clone into new pattern group (1..32)"
                                   />
                  <PopupMenuButton caption="Clone pattern (sub)" acceleratorKey="lctrl-lshift-r" actionName="pattern_clone_sub"
                                   toolTipCaption="Allocate new pattern and duplicate the current one\n\n (note) clone into new sub-pattern (A..D)"
                                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Free pattern" acceleratorKey="lctrl-x f3" actionName="pattern_free"
                                   toolTipCaption="Free pattern + meta pattern info (e.g. pattern length)\n\n (note) When block mode is set to PATTERN, lshift-f3 will clear the entire pattern and keep the meta info"
                                   />
                  <PopupMenuButton caption="Clear pattern" altAcceleratorKey="lshift-BACKSPACE" actionName="pattern_clear"
                                   toolTipCaption="Clear pattern"
                                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Copy pattern"
                                   acceleratorKey="lshift-f4"
                                   altAcceleratorKey="lctrl-c"
                                   actionName="pattern_copy"
                                   toolTipCaption="Copy pattern to clipboard.\n\n (note) When no block is selected, lctrl-c does the same thing"
                                   />
                  <PopupMenuButton caption="Paste pattern"
                                   acceleratorKey="lshift-f5"
                                   altAcceleratorKey="lctrl-v"
                                   actionName="pattern_paste"
                                   />
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Capture">
                    <PopupMenuButton caption="Start output capture"
                                     acceleratorKey="lctrl-x c"
                                     actionName="pattern_capture_begin"
                                     toolTipCaption="Capture node output to internal capture buffer\n\n (note) capture-mode ends when replay is stopped"
                                     />
                    <PopupMenuButton caption="Paste output capture buffer"
                                     acceleratorKey="lctrl-x v"
                                     actionName="pattern_capture_paste"
                                     toolTipCaption="Paste capture buffer to current pattern"
                                     />
                    <PopupMenuCheckButton id=pmcb_pattern_capture_ticks caption="Use ticks instead of millisec" checked=0 actionName="pattern_capture_ticks"
			                  toolTipCaption="When enabled, use ticks instead of millisec as capture timebase.\n\n (note) ticks are (slightly) more precise\n (note) millisec capture timing modulations"
			                  />
                    <PopupMenuSeparator/>
                    <PopupMenuButton caption="Export pattern to output capture buffer"
                                     acceleratorKey="lctrl-x \\"
                                     actionName="pattern_capture_export"
                                     toolTipCaption="Export pattern to (monitor) output capture buffer / clipboard\n\n (note) lctrl-x < on german keyboards\n\n (note) can be pasted in FreeForm nodes (for example)"
                                     />
                    <PopupMenuSeparator/>
                    <PopupMenuButton caption="Upload capture buffer to procedural track sample"
                                     acceleratorKey="lctrl-x ,"
                                     actionName="pattern_capture_upload_to_eureka"
                                     toolTipCaption="Upload capture buffer to Eureka procedural track sample\n\n (note) requires audio sample unique id (UID) to be configured (see instrument view)"
                                     />
                    <PopupMenuSeparator/>
                    <PopupMenuButton caption="Download procedural track sample seq to capture buffer"
                                     actionName="pattern_capture_download_from_eureka"
                                     toolTipCaption="Download Eureka procedural track sample to capture buffer\n\n (note) requires audio sample unique id (UID) to be configured (see instrument view)"
                                     />
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Import">
                    <PopupMenuButton caption="Import from Analog Rytm.."
                                     acceleratorKey="lshift-f7"
                                     actionName="pattern_import_ar"
                                     toolTipCaption="Import from last selected/received NodeAnalogRytm pattern"
                                     />
                    <PopupMenuButton caption="Import from Trig Seq.."
                                     acceleratorKey="lshift-f8"
                                     actionName="pattern_import_trigseq"
                                     toolTipCaption="Import from NodeTrigSeq pattern (marked by copy-to-clipboard)"
                                     />
                    <PopupMenuButton caption="Import from Monitor.."
                                     acceleratorKey="lshift-f9"
                                     actionName="pattern_import_monitor"
                                     toolTipCaption="Import from NodeMonitor pattern clipboard\n\n (note) auto-create instruments, params, ctl envs\n (note) please assign instruments to tracks and enable Play->Filter and Play->All for multi-track import\n (note) if there is only one pattern, auto-create tracks and temporarily enable multi-track recording (Play->Filter/All/Spread)"
                                     />
                    <PopupMenuButton caption="Import Standard MIDI File (.mid).."
                                     acceleratorKey="lctrl-lshift-f9"
                                     actionName="pattern_import_smf"
                                     toolTipCaption="Import Standard MIDI File\n\n (note) shows file dialog\n\n (note) alternatively, drag'n'drop a .mid file onto the pattern view\n\n (note) please create tracks + instruments + controller cels before import"
                                     />
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Previous / Next">
                    $(PATTERN_PREVIOUS_NEXT)
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Enter pattern number" acceleratorKey="lctrl-g" actionName="pattern_enternr"/>
                  <PopupMenuButton caption="Enter pattern length" acceleratorKey="lctrl-l" actionName="pattern_enterlen"/>
                  <PopupMenuButton caption="Set pattern length to cursor" acceleratorKey="lctrl-lshift-l" actionName="pattern_lentocursor"/>
                  <PopupMenuButton caption="Enter pattern name" acceleratorKey="lshift-n" actionName="pattern_entername"/>
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Double / Reverse / Rotate">
                    <PopupMenuButton caption="Double pattern" acceleratorKey="lctrl-p" actionName="pattern_double"
                                     toolTipCaption="Double pattern length"
                                     />
                    <PopupMenuButton caption="Double pattern (copy)" acceleratorKey="lctrl-lshift-p" actionName="pattern_double_copy"
                                     toolTipCaption="Double pattern length and copy first half of pattern to second half"
                                     />
                    <PopupMenuSeparator/>
                    <PopupMenuButton caption="Reverse pattern" actionName="pattern_reverse"
                                     toolTipCaption="Reverse pattern"
                                     altAcceleratorKey="lctrl-x e"
                                     />
                    <PopupMenuSeparator/>
                    <PopupMenuButton caption="Rotate up" altAcceleratorKey="lctrl-x PAGEUP" actionName="pattern_rotate_up"
                                     toolTipCaption="Rotate pattern up"
                                     />
                    <PopupMenuButton caption="Rotate down" acceleratorKey="lctrl-x PAGEDOWN" actionName="pattern_rotate_down"
                                     toolTipCaption="Rotate pattern down"
                                     />
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Split pattern to clipboard" acceleratorKey="lctrl-k" actionName="pattern_split"/>
                  <PopupMenuButton caption="Split pattern to new pattern" acceleratorKey="lctrl-lshift-k" actionName="pattern_split_new"/>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Trim pattern start to cursor" acceleratorKey="lshift-t" actionName="pattern_trim_start_to_cursor"/>
                </PopupMenu>




                <!-- Events menu -->
                <PopupMenu caption="E\avents">
                  <PopupMenuButton caption="Delete current track envelope" actionName="events_deleteenv"
                                   altAcceleratorKey="lctrl-BACKSPACE"
		                   toolTipCaption="This will delete the envelope, along with all events, for the controller the cursor is currently placed on"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Delete">
                    <PopupMenuButton caption="Delete event (current ctl) / Delete block" altAcceleratorKey="delete" actionName="events_keydelete" />
                    <PopupMenuButton caption="Delete event (current ctl, one tick) / Delete block" altAcceleratorKey="lctrl-delete" actionName="events_keydeletetick" />
                    <PopupMenuButton caption="Delete event (all ctls) / Delete block+Shift events" acceleratorKey="lshift-delete" actionName="events_deleteeventall"/>
                    <PopupMenuButton caption="Delete event (all ctls, one tick)" acceleratorKey="lctrl-lshift-delete" actionName="events_deleteeventalltick"/>
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <!--<PopupMenuCheckButton id=pmcb_event_pulse caption="Pulse envelope mode"
		      actionName="event_env_pulse"
		      toolTipCaption="When checked, auto-reset ctl value to 0 after new event"
		      />
                      <PopupMenuSeparator/>-->
                      <PopupMenuButton caption="Clear event (current ctl, no shift) + move down" altAcceleratorKey="\\" actionName="events_clearevent"
                                       toolTipCaption="Delete event, don\'t shift pattern, move cursor down\n\n (note) '<' on german keyboards\n (note) delete block events when there is a selection"
                                       />
                      <PopupMenuButton caption="Clear event (all ctls, no shift) + move down" altAcceleratorKey="lshift-\\" actionName="events_cleareventall"
                                       toolTipCaption="Delete all events of current step, don\'t shift pattern, move cursor down\n\n (note) 'lshift-<' on german keyboards"
                                       />
                      <PopupMenuSeparator/>
                      <PopupMenu caption="Insert">
                        <PopupMenuButton caption="Insert event (current ctl)" altAcceleratorKey="insert" actionName="events_keyinsert" />
                        <PopupMenuButton caption="Insert event (current ctl, one tick)" altAcceleratorKey="lctrl-insert" actionName="events_keyinserttick" />
                        <PopupMenuButton caption="Insert event (all ctls)" acceleratorKey="lshift-insert" actionName="events_inserteventall"/>
                        <PopupMenuButton caption="Insert event (all ctls, one tick)" acceleratorKey="lctrl-lshift-insert" actionName="events_inserteventalltick"/>
                      </PopupMenu>
                      <PopupMenuSeparator/>
                      <PopupMenuButton caption="Multiply delta times by constant.." actionName="events_timemulconst"
		                       toolTipCaption="Multiply delta-times of current/all tracks by constant factor"
                                       altAcceleratorKey="lctrl-x m"
		                       />
                      <PopupMenuSeparator/>
                      <PopupMenuButton caption="Calc delay ticks" actionName="events_calcdelayticks"
		                       toolTipCaption="Write micro delay ticks to current cel\n\n (note) depends on current step resolution\n\n (note) e.g. when an event is placed 4 ticks behind step resolution grid, create new event exactly on grid and store 4\n\n (note) this is supposed to be used in conjunction with CTL_GROOVE or NodeDelay (RPN_DELAY_TICKS)\n\n (note) if the current cursor is not placed on a CTL_GROOVE, CTL_DELAY, or CTL_USR cel,\n              find first cel that is mapped to an instrument parameter with name substring 'dly' or 'delay' (all tracks)"
                                       altAcceleratorKey="lctrl-x f"
		                       />
                      <PopupMenuSeparator/>
                      <PopupMenuButton caption="Collapse" actionName="events_collapse"
		                       toolTipCaption="Collapse events\n\n (note) prepare for tap-mode at current step resolution"
                                       altAcceleratorKey="lctrl-x j"
		                       />
                      <PopupMenuButton id=pmb_events_collapse
                                       caption="Collapse + Start Tap Mode" actionName="events_collapse_tap"
		                       toolTipCaption="..see source.."
                                       altAcceleratorKey="lctrl-t"
		                       />
                      <PopupMenuSeparator/>
                      <PopupMenuButton caption="Copy MIDI output state to track" actionName="events_copystate"
		                       toolTipCaption="Copy current MIDI output state to track\n\n (note) iterates visible cels"
                                       altAcceleratorKey="lctrl-o"
		                       />
                      <PopupMenuSeparator/>
                      <PopupMenuButton caption="Copy cel port+type to Ctl.Clipboard A" actionName="events_copyctl_a"
		                       toolTipCaption="Can be pasted in ModMatrix node\n\n (note) lshift-1 only works when pattern is not editable"
                                       acceleratorKey="lctrl-u"
                                       altAcceleratorKey="lshift-1"
		                       />
                      <PopupMenuButton caption="Copy cel port+type to Ctl.Clipboard B" actionName="events_copyctl_b"
		                       toolTipCaption="Can be pasted in ModMatrix node\n\n (note) lshift-2 only works when pattern is not editable"
                                       acceleratorKey="lctrl-lshift-u"
                                       altAcceleratorKey="lshift-2"
		                       />
                      <PopupMenuSeparator/>
                      <PopupMenuCheckButton id=pmcb_pattern_recordpre caption="Pre-Count" altAcceleratorKey="lctrl-x RCTRL" checked=1 actionName="events_recordpre"/>
                      <PopupMenuCheckButton id=pmcb_pattern_recordnoteoff caption="Record note-off events" altAcceleratorKey="lctrl-x RSHIFT" checked=1 actionName="events_recordnoteoff"/>
                      <PopupMenuCheckButton id=pmcb_pattern_recordnoteoff_replay caption="Record note-off only during replay" checked=0 actionName="events_recordnoteoff_replay"
			                    toolTipCaption="When checked, record note-off events only during replay"
			                    />
                      <PopupMenuCheckButton id=pmcb_pattern_recordnoteoff_dur caption="Record CTL_DURn" checked=0 actionName="events_recordnoteoff_dur"
			                    toolTipCaption="When checked, record CTL_DURn instead of note-offs"
                                            altAcceleratorKey="lctrl-x /"
			                    />
                      <PopupMenuCheckButton id=pmcb_pattern_recordquantize caption="Quantize recorded events" actionName="events_recordquantize"
			                    toolTipCaption="When checked, recorded events will be quantized to the current step resolution/zoom.\n\nWhen unchecked, events will be recorded in the highest possible resolution but depending on the current zoom\n it might happen that these events are not visible in the pattern editor."
                                            altAcceleratorKey="lctrl-x RETURN"
                                            />
                      <PopupMenuCheckButton id=pmcb_pattern_recusrctlnoteon caption="Record UsrCtl at note-on" actionName="events_recordusrctlnoteon"
			                    toolTipCaption="When checked, postpone user controller recording until next recorded note on\n\n (note) e.g. for recording controllers that are latched at note-on"
                                            altAcceleratorKey="lctrl-x ."
                                            />
                      <PopupMenuCheckButton id=pmcb_pattern_reclatency caption="Compensate recording latency" actionName="events_reclatency"
			                    toolTipCaption="When checked, compensate for recording latency (see prefs)"
                                            altAcceleratorKey="lctrl-x h"
                                            />
                      <PopupMenuCheckButton id=pmcb_edit_swaplshift caption="Swap lshift INSERT/DELETE behaviour" actionName="edit_swaplshift"
			                    toolTipCaption="When checked, swap lshift INSERT/DELETE behaviour"
                                            altAcceleratorKey="lctrl-x DELETE"
                                            />
                      <PopupMenuCheckButton id=pmcb_edit_showctlinfo caption="Show incoming ctl info" actionName="edit_showctlinfo"
			                    toolTipCaption="When checked, show incoming controller info"
                                            />
                      <PopupMenuCheckButton id=pmcb_edit_frrectokjinsplay caption="Echo frame-rec to keyjazz-instr frame-play events" actionName="edit_frrectokjinsplay"
			                    toolTipCaption="When checked, translate and echo (remaining) frame-rec events to current keyjazz-instrument\n\n (note) while node editor is visible\n (note) frame-rec will be cleared afterwards\n (note) events will also be added to output-capture buffer (when active)"
                                            altAcceleratorKey="lctrl-x 9"
                                            />
                </PopupMenu>




                <!-- Block menu -->
                <PopupMenu caption="\aBlock">
                  <!--      <PopupMenuButton caption="Edit properties.." actionName="env_edit"/>-->
                  <PopupMenuButton id=pmb_block_mode
		                   caption="Current blockmode: TRACK" actionName="block_mode"
		                   altAcceleratorKey="lctrl-x b"
		                   toolTipCaption="Click to change blockmode\n (track, pattern, controller)"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Free envelope(s) (all steps)" acceleratorKey="lshift-f3" actionName="block_free_env"
		                   toolTipCaption="Free envelope(s)\n\nThis command depends on the currently selected block mode:\n  - TRACK: delete all current track envelopes\n  - CTL: delete current track envelope (depends on cursor x position)\n  - PATTERN: delete all track envelopes"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Quantize (again)" actionName="block_quantize_last"
                                   acceleratorKey="lctrl-lshift-a"
		                   toolTipCaption="Quantize selected block using last selected method ('hard' or 'dialog')"
		                   />
                  <PopupMenuButton caption="Quantize (100%)" actionName="block_quantize_100"
		                   toolTipCaption="Quantize selected block to current step resolution (100%)"
		                   />
                  <PopupMenuButton caption="Quantize (50%)" actionName="block_quantize_50"
		                   toolTipCaption="Quantize selected block to current step resolution (50%)"
		                   />
                  <PopupMenuButton caption="Quantize (25%)" actionName="block_quantize_25"
		                   toolTipCaption="Quantize selected block to current step resolution (25%)"
		                   />
                  <PopupMenuButton caption="Quantize.." actionName="block_quantize_dialog"
		                   toolTipCaption="Show Advanced Quantization Dialog"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Mark block start" acceleratorKey="lctrl-b" actionName="block_beginblock"
		                   />
                  <PopupMenuButton caption="Mark block end" acceleratorKey="lctrl-e" actionName="block_endblock"/>
                  <PopupMenuButton caption="Mark entire pattern" acceleratorKey="lctrl-a" actionName="block_markpattern"
		                   toolTipCaption="(note) the selected area depends on the current block-mode\n (note) selects none when there already is a selection"
		                   />
                  <PopupMenuButton caption="Select none" actionName="block_selectnone"/>
                  $(BLOCK_COPY_PASTE)
                  <PopupMenuSeparator/>
                  <PopupMenuButton id=pmb_block_transpose_up caption="Transpose up" acceleratorKey="lshift-f2" actionName="block_transpose_up"
		                   toolTipCaption="Transpose all notes in selected block up one note.\n\nWhen no block is selected, transpose all notes of current track pattern."
		                   />
                  <PopupMenuButton id=pmb_block_transpose_down caption="Transpose down" acceleratorKey="lshift-f1" actionName="block_transpose_down"
		                   toolTipCaption="Transpose all notes in selected block down one note.\n\nWhen no block is selected, transpose all notes of current track pattern."
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Shift">
                    <PopupMenuButton caption="Shift up" altAcceleratorKey="lctrl-lshift-up" actionName="block_shift_up"
		                     toolTipCaption="Shift all events in selected block up.\n\n (note) the shift size depends on the current step resolution (zoom)\n\n (note) when a block is selected, the kbd shortcut overrides the \"go to previous pipe\" function"
		                     />
                    <PopupMenuButton caption="Shift up (one tick)" altAcceleratorKey="lctrl-lshift-left" actionName="block_shift_up_tick"
		                     toolTipCaption="Shift all events in selected block up by one tick.\n\n (note) when a block is selected, the kbd shortcut overrides the \"go to previous node\" function"
		                     />
                    <PopupMenuButton caption="Shift down" altAcceleratorKey="lctrl-lshift-down" actionName="block_shift_down"
		                     toolTipCaption="Shift all events in selected block down.\n\n (note) the shift size depends on the current step resolution (zoom)\n\n (note) when a block is selected, the kbd shortcut overrides the \"go to next pipe\" function"
		                     />
                    <PopupMenuButton caption="Shift down (one tick)" altAcceleratorKey="lctrl-lshift-right" actionName="block_shift_down_tick"
		                     toolTipCaption="Shift all events in selected block down one tick.\n\n (note) when a block is selected, the kbd shortcut overrides the \"go to next node\" function"
		                     />
                  </PopupMenu>
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Interpolate.." altAcceleratorKey="lctrl-x 1" acceleratorKey="lctrl-i" actionName="block_interpol"
		                   toolTipCaption="Interpolate controller values of currently selected cel within the range of the currently selected block\n\n (note) This will ignore the current block mode (i.e. it will only modify the ctl. envelope the cursor is currently placed on)"
		                   />
                  <!--      <PopupMenu caption="Interpolation">
                            <PopupMenuCheckButton caption="Sample&Hold / Reset" checked="1" actionName="env_interpol_shreset"/>
                            <PopupMenuCheckButton caption="Sample&Hold" actionName="env_interpol_sh"/>
                            <PopupMenuCheckButton caption="Linear" actionName="env_interpol_linear"/>
                            <PopupMenuCheckButton caption="Cosine" actionName="env_interpol_cosine"/>
                            <PopupMenuCheckButton caption="Quadratic" actionName="env_interpol_quadratic"/>
                            <PopupMenuCheckButton caption="Cubic" actionName="env_interpol_cubic"/>
                            <PopupMenuCheckButton caption="Quintic" actionName="env_interpol_quintic"/>
                  </PopupMenu>
                  -->
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Sort Notes or Toggle Slides" acceleratorKey="lshift-s" actionName="edit_toggleslide_or_sort_notes"
		                   toolTipCaption="Sort notes (and velocity / duration) on each step in the selection\n\nWhen there's no selection, toggle slide (increase note duration of previous note(s))"/>
                </PopupMenu>




                <!-- Instrument menu -->
                <PopupMenu caption="\aInstrument">
                  <PopupMenuButton caption="Toggle pattern / instrument view" altAcceleratorKey="lctrl-tab" actionName="instrument_toggleviews"
		                   toolTipCaption="Add/remove/select/edit instrument"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Keyjazz octave down" acceleratorKey="f1" actionName="instrument_kjoctavedown"
		                   toolTipCaption="Transpose keyjazz down one octave\n\n (note) please notice that the F1 key works in all dialog windows"
		                   />
                  <PopupMenuButton caption="Keyjazz octave up" acceleratorKey="f2" actionName="instrument_kjoctaveup"
		                   toolTipCaption="Transpose keyjazz up one octave\n\n (note) please notice that the F2 key works in all dialog windows"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Enter default note-on velocity" acceleratorKey="lshift-w" actionName="edit_enternotevelocity"/>
                  <PopupMenuSeparator/>
                  <PopupMenuCheckButton id=pmcb_instrument_keyjazzmanualnoteoff
			                caption="Keyjazz manual note-off" checked=0 actionName="instrument_keyjazzmanualnoteoff"
			                toolTipCaption="When checked, hold keyjazz note until key is released\n\nWhen unchecked, use duration value from pattern envelope or instrument default duration"
			                />
                  <PopupMenuSeparator/>
                  <PopupMenuButton caption="Previous instrument" acceleratorKey="lctrl-[" actionName="instrument_previous"
		                   toolTipCaption="Select previous instrument\n\n (note) 'ü' on german keyboards"
		                   />
                  <PopupMenuButton caption="Next instrument" acceleratorKey="lctrl-]" actionName="instrument_next"
		                   toolTipCaption="Select next instrument\n\n (note) '+' on german keyboards"
		                   />
                  <PopupMenuButton caption="Enter instrument number" acceleratorKey="lshift-f" actionName="instrument_enternumber"
		                   toolTipCaption="Set keyboard focus to instr.nr. widget"
		                   />
                  <PopupMenuSeparator/>
                  <PopupMenuButton altAcceleratorKey="lshift-k" caption="Edit instrument audio sample" actionName="instrument_editsample"
			           toolTipCaption="Edit instrument audio sample in Eureka\n\n (note) looks at the instrument currently selected in the InstrumentView\n (note) use 'k' to edit the current track sound / sample instead"
			           />
                  <PopupMenuSeparator/>
                  <PopupMenu caption="Select instrument">
                    <PopupMenu caption="0..8" dynamicActionName="instrument_select_08">        </PopupMenu>
                    <PopupMenu caption="9..H" dynamicActionName="instrument_select_9H">        </PopupMenu>
                    <PopupMenu caption="I..Q" dynamicActionName="instrument_select_IQ">        </PopupMenu>
                    <PopupMenu caption="R..Z" dynamicActionName="instrument_select_RZ">        </PopupMenu>
                    <PopupMenu caption="a..i" dynamicActionName="instrument_select_ai">        </PopupMenu>
                    <PopupMenu caption="j..r" dynamicActionName="instrument_select_jr">        </PopupMenu>
                    <PopupMenu caption="s..z" dynamicActionName="instrument_select_sz">        </PopupMenu>
                  </PopupMenu>
                  <!--
                      <PopupMenuSeparator/>
                      <PopupMenu caption="Korg Radias">
                        <PopupMenuButton caption="Resend init program data" actionName="instrument_radias_init"/>
                      </PopupMenu>
                      -->
                </PopupMenu>

              </PopupMenuBar>
        </Panel>

      </Panel> <!-- end left -->
    </Panel>

  </Panel>

  <!-- Tracker/pattern view -->
  <Panel dir=CENTER size="100%;100%">

    <LayerSwitch id=ls_view dir=CENTER align=TOP size="100%;100%">
      <!-- 0: PatternView -->
      <Panel>
        <LayerSwitch id=ls_envelope dir=BOTTOM align=expandx calcsizeonlycurrent=1>
          <!-- 0: PatternView only -->
          <Panel id=pn_pattern_view dir=CENTER align=TOP size="100%;100%">
            <LayerSwitch id=ls_piano dir=BOTTOM align=expandx calcsizeonlycurrent=1>
              <!-- 0: Piano invisible -->
              <Panel reqSize=1;1 />

              <!-- 1: Piano visible -->
              <PianoWidget id=piano dir=BOTTOM
                           align=expandX
                           reqSizeYScaled=60
                           lastnotesautooff=1
                           />
              <!-- toolTipCaption="Piano Widget\n\n (note) toggle with lctrl-x `  (^ on german kbds)  or via the \"Edit\" pulldown menu" -->
            </LayerSwitch>
            <NT_PatternView id=pattern_view dir=CENTER align=TOP size="100%;100%" debug=1/>
            <LayerSwitch id=ls_tracks dir=BOTTOM align=expandx calcsizeonlycurrent=1>
              <!-- 0: Track scroller -->
              <Scroller id=sr_tracks dir=BOTTOM align=expandx step=1 style=flat/>
              <!-- 1: Empty -->
              <Panel reqSize=1;1/>
            </LayerSwitch>
          </Panel>
          <!-- 1: PatternView + Envelope view -->
          <SplitPane id=sp_envelope_view dir=CENTER align=TOP align=expand vertical=1 />
          <!-- 2: Envelope view (never shown directly, only via splitpane -->
          <Panel id=pn_envelope_view autoresolve=0>
            <NT_EnvelopeView id=envelope_view dir=CENTER align=TOP align=expandx reqSizeYScaled=128/>
          </Panel>
        </LayerSwitch>
      </Panel>

      <!-- 1: InstrumentView -->
      <NT_InstrumentView id=instrument_view dir=CENTER align=TOP size="100%;100%" />

      <!-- 2: Play -->
      <Panel dir=CENTER align=TOP size="100%;100%" alpha=255>
        <Panel dir=TOP align=expandx padLeft=20>

          <SizeGroupX id=sgx_play_lbc1/>
          <SizeGroupX id=sgx_play_cmc1/>

          <!-- Node Class / Show in arranger -->
          <Panel dir=BOTTOM align=expandx padTop=10 padBottom=0>

            <ComboBox id=cm_node_class_show_in
                      name="InArr"
                      dir=LEFT
                      align=centerY
                      font=big9
                      toolTipCaption="Show node in selected arranger (* = show in all arrangers)"
                      padLeft=4
                      />

            <CheckBox id=cb_node_class_show
                      name="Class: Show"
                      dir=LEFT
                      caption="Show in Arranger"
                      toolTipCaption="When checked, show node in arranger."
                      font=big8
                      iconPrefix=chb2x
                      padLeft=10
                      />

            <ComboBox id=cm_node_class
                      name="Class"
                      dir=LEFT
                      font=big7
                      align=centerY
                      largeArrow=1
                      sizeGroup=sgx_play_cmc1
                      />

            <Label dir=LEFT
                   align=centerY
                   fillBG=0
                   caption="Class:"
                   font=big8
                   textPlacement=RIGHT
                   sizeGroup=sgx_play_lbc1
                   />
          </Panel>


          <!-- Play Mode -->
          <Panel dir=BOTTOM align=expandx padTop=10 padBottom=0>

            <Panel dir=LEFT align=centerY >
              <FloatParam id=fp_speed_scl_reset
                          name="SpdRst"
                          dir=LEFT
                          align=baseline
                          value=0 reset=1 min=0 max=4 rangeEditable=0
                          presets=0.125;0.25;0.375;0.5;0.625;0.75;0.875;1.0;1.25;1.5;1.75;2.0;2.5;3.0;3.5;4
                          stepCoarse=0.01 stepFine=0.001
                          display=percent
                          precision=3
                          mousePrecision=2
                          display=percent
			  textAlign=RIGHT
                          cols=3
                          toolTipCaption="RPN 582 (Com: Speed) reset value"
                          />

              <Label dir=LEFT
                     align=baseline
                     caption="Speed:"
                     fillBG=1
                     textPlacement=RIGHT
                     padLeft=20
                     />

              <CheckBox id=cb_play_extclk
                        dir=LEFT
                        align=baseline
                        caption="Ext.Clk"
                        toolTipCaption="When checked, play next tick only when external clock is received\n\n (note) External clock tick is valid for <gatetime> ticks\n\n (note) When ext.clk is enabled, the default run mode is 0 (off)\n\n (note) use RPN_COMMON_EXTCLK to enable/disable during replay"
                        padLeft=10
                        />

              <FloatParam id=fp_play_extclk_gatetime
                          dir=LEFT
                          align=baseline
			  textAlign=RIGHT
                          value=1 min=0 max=192 maxLimit=16383 maxEditable=1 nominal=192
                          fraction=1
                          stepFine=1 stepCoarse=1
                          cols=3
                          toolTipCaption="Ext clock gatetime reset value (#steps)\n\n (note) the displayed length depends on the current zoom level"
                          />

              <Label dir=LEFT
                     align=baseline
                     fillBG=0
                     caption="Gatetime:"
                     textPlacement=RIGHT
                     padLeft=20
                     />

              <CheckBox id=cb_play_change_reset
                        name="Change: Reset"
                        dir=LEFT
                        align=baseline
                        caption="Reset"
                        toolTipCaption="When checked, start playing the pattern from the beginning when it has changed\n\nWhen unchecked, play new pattern at current position\n\nWhen set to \'maybe\', start pattern in suspended mode when replay starts."
                        mixed=1
                        padLeft=10
                        />

              <ComboBox id=cm_play_mode
                        name="PlayMode"
                        dir=LEFT
                        align=centerY
                        options="Oneshot;Loop"
                        optionToolTipCaptions="Oneshot: Play pattern once (don't loop);Loop: Loop pattern"
                        font=big7
                        largeArrow=1
                        sizeGroup=sgx_play_cmc1
                        />
            </Panel>

            <Label dir=LEFT
                   align=centerY
                   caption="Play:"
                   font=big8
                   textPlacement=RIGHT
                   fillBG=0
                   sizeGroup=sgx_play_lbc1
                   />

          </Panel>


          <!-- Recording note-filter -->
          <Panel dir=BOTTOM align=expandx padTop=10 padBottom=0>

            <CheckBox id=cb_play_rec_bg
                      name="RecBg"
                      dir=LEFT
                      align=baseline
                      caption="Background"
                      toolTipCaption="When checked, continue recording even when node is not currently being edited\n\n(note) Pattern edit mode must also be enabled (Edit->Pattern edit mode)"
                      padLeft=8
                      />

            <CheckBox id=cb_play_rec_spread
                      dir=LEFT
                      align=baseline
                      name="RecSpr"
                      caption="Spread"
                      toolTipCaption="When checked, spread realtime-recorded notes over multiple tracks (implies \"All\" mode)\n\n (note) make sure that there are enough tracks (filtered track instrument dev+ch must match recorded event dev+ch)"
                      padLeft=8
                      />

            <CheckBox id=cb_play_rec_all
                      dir=LEFT
                      align=baseline
                      name="RecAll"
                      caption="All"
                      toolTipCaption="When checked, record all tracks\n\nWhen unchecked, only record current track\n\n (note) incoming events are recorded to a track if its filtered instrument dev+ch matches the recorded event\'s dev+ch"
                      padLeft=8
                      />

            <CheckBox id=cb_play_match_instr
                      name="Filter"
                      dir=LEFT
                      align=baseline
                      caption="Filter"
                      toolTipCaption="When checked, filter incoming note events by current instrument dev and channel\n\nWhen unchecked, record all incoming note events\n\nWhen in mixed state, filter events by MIDI channel only\n\n (note) !notes will only be recorded when the track cursor is placed on a note cel!"
                      mixed=1
                      padLeft=8
                      />

            <CheckBox id=cb_play_rec_prev
                      name="RecPrev"
                      dir=LEFT
                      align=baseline
                      caption="Prev"
                      toolTipCaption="When checked, record output of previous node(s) (play frame)\n\nWhen unchecked, only record external MIDI input (rec frame)"
                      />

            <CheckBox id=cb_play_rec_qlast
                      name="RecQLast"
                      dir=LEFT
                      align=baseline
                      caption="Qlast"
                      toolTipCaption="When checked, always quantize last step"
                      padLeft=10
                      />

            <ComboBox id=cm_play_rec_mode
                      name="RecMode"
                      dir=LEFT
                      align=baseline
                      options="Overdub;Raster"
                      font=big7
                      toolTipcaption="Recording mode\n\nOverdub: Record on top of existing events\n\nRaster: Clear each step before it is played/recorded (clear starts when first note event is recorded)"
                      largeArrow=1
                      sizeGroup=sgx_play_cmc1
                      />

            <Label dir=LEFT
                   align=centerY
                   fillBG=0
                   caption="Record:"
                   font=big8
                   textPlacement=RIGHT
                   sizeGroup=sgx_play_lbc1
                   />
          </Panel>


          <!-- Recording note-filter -->
          <Panel dir=BOTTOM align=expandx padTop=10 padBottom=0>

            <Panel dir=LEFT align=baseline>
              <Label dir=LEFT
                     padLeft=2
                     align=baseline
                     caption="Steps"
                     />
              <FloatParam id=fp_play_dur_steps
                          dir=LEFT
                          align=baseline
                          min=0 maxLimit=16384 max=8 maxEditable=1 nominal=16 processLog=1
                          fraction=1
                          stepFine=1 stepCoarse=1
                          rangeEditable=0
                          cols=3
			  textAlign=RIGHT
                          toolTipCaption="Duration (CTL_DUR) scaling (#steps)\n\n (note) the displayed length depends on the current zoom level\n\n (note) also used as a scaling factor for CTL_MUTE step mutes (4x this duration)"
                          />
            </Panel>

            <Label dir=LEFT
                   align=baseline
                   caption="Duration:"
                   textPlacement=RIGHT
                   fillBG=0
                   padLeft=10
                   />

            <Panel dir=LEFT align=baseline>
              <Label dir=LEFT
                     align=baseline
                     caption="Steps"
                     padLeft=2
                     />
              <FloatParam id=fp_play_offlen_steps
                          dir=LEFT
                          align=baseline
                          value=1 min=0 maxLimit=16384 max=16 nominal=16 processLog=1
                          fraction=1
                          stepFine=1 stepCoarse=1
                          rangeEditable=0
                          cols=3
			  textAlign=RIGHT
                          toolTipCaption="Offset / length scaling (#steps)\n\n (note) the displayed length depends on the current zoom level\n\n (note) The pattern length should be divisible by this value\n\n (note) This setting is also relevant to pattern offsets / lengths set via RPN\n\n (note) It is highly recommended to set this to 16th notes"
                          />
            </Panel>

            <Label dir=LEFT
                   align=baseline
                   caption="Off / Len:"
                   textPlacement=RIGHT
                   fillBG=0
                   padLeft=10
                   />

            <ComboBox id=cm_play_rec_sel
                      name="RecSel"
                      dir=LEFT
                      align=centerY
                      options="None;Notes;Notes + All Ctls;All Ctls;Current Ctl"
                      font=big7
                      toolTipcaption="Recording selection"
                      largeArrow=1
                      sizeGroup=sgx_play_cmc1
                      />

            <Spacer dir=LEFT
                    sizeGroup=sgx_play_lbc1
                    />
          </Panel>

          <!-- MIDI node link -->
          <Panel dir=BOTTOM align=expandx padTop=10 padBottom=0>

            <ComboBox id=cm_play_midi_node
                      optionSizeReserve="M9999: long node name MMMMMMMMMMMMM"
                      name="MNode"
                      dir=LEFT
                      font=big7
                      align=centerY
                      toolTipCaption="MIDI node link\n\n (note) for AudioRecordDialog (go to MIDI source pattern when editing audio pattern)"
                      largeArrow=1
                      />

            <Label dir=LEFT
                   align=centerY
                   caption="MIDI:"
                   font=big8
                   textPlacement=RIGHT
                   fillBG=0
                   sizeGroup=sgx_play_lbc1
                   />
          </Panel>

          <!-- Audio node link -->
          <Panel dir=BOTTOM align=expandx padTop=10 padBottom=0>

            <ComboBox id=cm_play_audio_node
                      optionSizeReserve="M9999: long node name MMMMMMMMMMMMM"
                      name="MNode"
                      dir=LEFT
                      font=big7
                      align=centerY
                      toolTipCaption="Audio node link\n\n (note) for AudioRecordDialog (auto-create pattern for new sample)"
                      largeArrow=1
                      />

            <Label dir=LEFT font=big8 caption="Audio:"
                   textPlacement=RIGHT
                   align=centerY
                   fillBG=0
                   sizeGroup=sgx_play_lbc1
                   />
          </Panel>

          <!-- Audio node link -->
          <Panel dir=BOTTOM align=expandx padTop=10 padBottom=0>

            <CheckBox id=cb_play_per_pattern_kj_instr
                      name="PatKJ"
                      dir=LEFT
                      caption="Per track-pattern KeyJazz instrument selection"
                      align=centerY
                      toolTipCaption="When checked, save / restore KeyJazz instrument per pattern (+track)\n\nWhen unchecked, save / restore only per track (independent of current edit pattern)"
                      />

            <Spacer dir=LEFT font=big8
                    sizeGroup=sgx_play_lbc1
                    />
          </Panel>

        </Panel>

        <AutoDeviceForm id=f_autodev dir=BOTTOM align=expandx/>

      </Panel>


      <!-- 3: Arp -->
      <Panel dir=CENTER align=TOP size="100%;100%" alpha=255>
        <Panel dir=CENTER align=expand>

          <SizeGroupX id=sgx_arp_lbc1/>
          <SizeGroupX id=sgx_arp_cmc1/>

          <!-- Arp enable -->
          <Panel dir=TOP padding=8;8;8;8>
            <CheckBox id=cb_arp
                      dir=LEFT
                      align=centerY
                      caption="Enable Arpeggiator"
                      font=big7
                      iconPrefix=chb2x
                      toolTipCaption="When enabled, replace pattern notes that match the notes in the table below with notes received on the automation channels"
                      padLeft=10
                      />
          </Panel>

          <!-- Note table -->
          <Panel dir=CENTER align=expand padLeft=10
                 >
            <TableView id=tv_arp_notes dir=CENTER size="100%;100%"
                       useCursorFoldKeys=0
                       style=flat
                       />

            <!-- Insert/delete -->
            <Panel dir=BOTTOM align=expandx padTop=4 padBottom=0>
              <SizeGroupY id=sgy_arp_bt/>

              <Button id=bt_arp_movedown
                      dir=LEFT
                      padLeft=8 caption="Move Down"
                      align=centerY
                      font=big8
                      toolTipCaption="Move selected note down"
                      labelButton=1
                      icon=movedownh
                      iconMono=movedownh_mono
                      iconPadLeft=4
                      iconPadRight=4
                      sizeGroup=sgy_arp_bt
                      />

              <Button id=bt_arp_moveup
                      dir=LEFT
                      align=centerY
                      caption="Move Up"
                      font=big8
                      icon=moveuph
                      iconMono=moveuph_mono
                      iconPadLeft=4
                      iconPadRight=4
                      toolTipCaption="Move selected note up"
                      labelButton=hidpi
                      padLeft=16
                      sizeGroup=sgy_arp_bt
                      />

              <Button id=bt_arp_remove
                      dir=LEFT
                      caption="Remove"
                      font=big8
                      icon=remove
                      iconMono=remove_mono
                      iconScale=0.5
                      toolTipCaption="Remove selected note"
                      labelButton=1
                      align=centerY
                      sizeGroup=sgy_arp_bt
                      padLeft=8
                      />

              <Button id=bt_arp_add
                      dir=LEFT
                      align=centerY
                      caption="Add"
                      font=big8
                      icon=add
                      iconMono=add_mono
                      iconScale=0.5
                      toolTipCaption="Add note"
                      labelButton=1
                      padLeft=4
                      sizeGroup=sgy_arp_bt
                      />

            </Panel>
          </Panel>

          <!-- Base octave, .. -->
          <Panel dir=RIGHT align=TOP padRight=20>
            <SizeGroupX id=sgx_arp_rlb/>
            <SizeGroupX id=sgx_arp_cm/>

            <Panel dir=RIGHT align=centerY padLeft=6 padTop=20>
              <!-- Base octave -->
              <Panel dir=BOTTOM>
                <ComboBox id=cm_arp_baseoct dir=LEFT
                          name="Arp Base Octave"
                          options="0;1;2;3;4;5;6;7;8;9;10"
                          align=centerY
                          toolTipcaption="Arp base octave\n\n (note) This is used to detect relative octave changes in the arpeggio pattern"
                          largeArrow=hidpi
                          textPlacement=centerX
                          sizeGroup=sgx_arp_cm
                          />

                <Label dir=LEFT
                       caption="Oct:"
                       align=centerY
                       textPlacement=RIGHT
                       sizeGroup=sgx_arp_rlb
                       />
              </Panel>
              <!-- Note Reset -->
              <Panel dir=BOTTOM padTop=4>
                <CheckBox id=cb_arp_reset dir=LEFT
                          caption="Note Reset"
                          toolTipCaption="Reset pattern when first note-on is received"
                          padLeft=2 padRight=2 padTop=0 padBottom=0
                          align=centerY
                          padLeft=4
                          />
                <Spacer dir=LEFT sizeGroup=sgx_arp_rlb/>
              </Panel>
              <!-- Wrap -->
              <Panel dir=BOTTOM padTop=4>
                <CheckBox id=cb_arp_wrap dir=LEFT
                          caption="Wrap"
                          toolTipCaption="Wrap around if arpeggio note table contains more entries than the number of currently active notes\n\n (note) When checked, an active note may map to multiple arp.table note entries"
                          padLeft=2 padRight=2 padTop=0 padBottom=0
                          align=centerY
                          padLeft=4
                          />
                <Spacer dir=LEFT sizeGroup=sgx_arp_rlb/>
              </Panel>
              <!-- Latch #notes -->
              <Panel dir=BOTTOM padTop=4>
                <ComboBox id=cm_arp_latch dir=LEFT
                          name="Arp Latch"
                          options="Off ;1;2;3;4;5;6;7;8;9;10;11;12"
                          align=centerY
                          toolTipcaption="Arp latch\n\nWhen this is set to 1..12, note-offs will not remove notes from the active notes array and note-ons will be added to the active notes array with wraparound\n\n (note) When \'Latch Reset\' is enabled, the active notes array will be reset when the first note is played"
                          largeArrow=hidpi
                          sizeGroup=sgx_arp_cm
                          />

                <Label dir=LEFT
                       caption="Latch:"
                       align=centerY
                       textPlacement=RIGHT
                       sizeGroup=sgx_arp_rlb
                       />
              </Panel>
              <!-- Latch reset -->
              <Panel dir=BOTTOM padTop=4>
                <CheckBox id=cb_arp_latch_reset dir=LEFT
                          caption="Latch Reset"
                          toolTipCaption="Reset active notes when first note-on is received"
                          padLeft=2 padRight=2 padTop=0 padBottom=0
                          align=centerY
                          padLeft=4
                          />
                <Spacer dir=LEFT sizeGroup=sgx_arp_rlb/>
              </Panel>
              <!-- Arp Play Arp Notes -->
              <Panel dir=BOTTOM padTop=4>
                <CheckBox id=cb_arp_play_arp_notes dir=LEFT
                          caption="Play Arp"
                          toolTipCaption="Play arp notes that can be but currently are not mapped to ext. notes"
                          padLeft=2 padRight=2 padTop=0 padBottom=0
                          align=centerY
                          padLeft=4
                          />
                <Spacer dir=LEFT sizeGroup=sgx_arp_rlb/>
              </Panel>
              <!-- Arp Play Non-Arp Notes -->
              <Panel dir=BOTTOM padTop=4>
                <CheckBox id=cb_arp_play_non_arp_notes dir=LEFT
                          caption="Play Non-Arp"
                          toolTipCaption="Play non arp notes\n\n (note) \"non arp\" notes cannot be mapped to ext notes since they are not listed in the arp. note table (on the left)"
                          padLeft=2 padRight=2 padTop=0 padBottom=0
                          align=centerY
                          padLeft=4
                          />
                <Spacer dir=LEFT sizeGroup=sgx_arp_rlb/>
              </Panel>
              <!-- Arp DynaLen -->
              <Panel dir=BOTTOM padTop=4>
                <CheckBox id=cb_arp_dynalen dir=LEFT
                          caption="Arp DynaLen"
                          toolTipCaption="Adjust arp length depending on number of active notes\n\n (note) Also see the Offset / Length scaling settings in the 'Play' view"
                          padLeft=2 padRight=2 padTop=0 padBottom=0
                          align=centerY
                          padLeft=4
                          />
                <Spacer dir=LEFT sizeGroup=sgx_arp_rlb/>
              </Panel>
            </Panel>
          </Panel>

        </Panel>
      </Panel>

    </LayerSwitch>

  </Panel>

</xfm>
