// ----
// ---- file   : NT_DeleteTrackDialog.tks
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2006-2017 by Bastian Spiegel.
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : This is part of the "syntracker" sequencer.
// ----
// ---- created: 14Sep2006
// ---- changed: ..., 28Feb2011, 23Jan2015, 26Feb2017
// ----
// ----
// ----
module MNT_DeleteTrackDialog;

use namespace ui;


class NT_DeleteTrackDialog extends ActionConsumer {
   ChoiceDialog d;
   NodeTrackerEditor *editor;

   public method run(NodeTrackerEditor _editor) {
      editor <= _editor;
      d <= ChoiceDialog.NewYesNo("Delete track",
                                 "Really delete the current track?\nAll track data will be lost.",
                                 this
                                 );
      d.showCentered();
   }

   public virtual consumeAction(IntAction _action) : boolean {
      if(_action.getActionProvider() == d)
      {
         d <= null; // Delete dialog
         switch(_action.getIntValue())
         {
            case ChoiceDialog.SELECT_YES:
               editor.cmd_track_delete(true/*bUndoBeginEnd*/);
               return true;

            case ChoiceDialog.SELECT_NO:
               Global.Debug2("CMD track_delete aborted.");
               return true;
         }
      }
      return false;
   }
}
