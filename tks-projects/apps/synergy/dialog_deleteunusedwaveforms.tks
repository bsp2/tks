// ----
// ---- file   : dialog_deleteunusedwaveforms.tks
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2013 by Bastian Spiegel. 
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See 
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : This is part of the "syntracker" sequencer.
// ----
// ---- changed: 30May2013, 05Jun2013
// ----
// ----
// ----
module MDialog_DeleteUnusedWaveforms;

use namespace ui;
use namespace st2;


class Dialog_DeleteUnusedWaveforms extends ActionConsumer {
   ChoiceDialog d;

   public method run(int _numWaveforms) {
      d <= ChoiceDialogMMT.NewYesNoAlways("Delete unused waveforms", 
                                          "The instrument ref'd "+_numWaveforms+" waveform(s) which are now unused.\n\nDo you want to delete them as well ?", 
                                          this
                                          );
      d.showNearMouse(-160, -80); //Centered();
   }
    
   public virtual consumeAction(IntAction _action) : boolean {
      if(_action.getActionProvider() == d)
      {
         switch(_action.getIntValue())
         {
            case ChoiceDialog.SELECT_YES:
               dlg_manage_instruments.deleteUnusedWaveforms();
               if(d.isAlwaysEnabled())
               {
                  STConfig.b_confirm_delete_unused_waveforms = false;
               }
               return true;

            case ChoiceDialog.SELECT_NO:
               return true;
         }
         d <= null; // Delete dialog
      }
      return false;
   }
}
