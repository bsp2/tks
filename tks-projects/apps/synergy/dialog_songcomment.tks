// ----
// ---- file   : dialog_songcomment.tks
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2006-2018 by Bastian Spiegel. 
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See 
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : This is part of the "syntracker" sequencer.
// ----
// ---- changed: 14Sep2006, ..., 28Feb2011, 04Jan2018
// ----
// ----
// ----
module MDialog_SongComment;

use namespace ui;
use namespace st2;


class Dialog_SongComment extends ActionConsumer {
   TextEditDialog *d;

   public method run() {
      String comment <= current_song.author_comment;
      d <= TextEditDialog.New("Song comment", 
                              "Edit song comment", 
                              "Ok", "Cancel",
                              comment, 
                              this);
      d.setEnableDialogIsPopup(true);
      d.showCentered();
      if(!comment.isBlank())
      {
         d.focusOKButton();
      }
   }
    
   public virtual consumeAction(StringAction _action) returns boolean {
      if(_action.getActionProvider() == d)
      {
         current_song.author_comment = _action.getStringValue();
         Global.Debug("song comment set to \""+current_song.author_comment+"\".");
         return true;
      }
      return false;
   }
}

