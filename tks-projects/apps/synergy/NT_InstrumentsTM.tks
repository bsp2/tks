// ----
// ---- file   : ManageInstrumentsTM.tks
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2007-2025 by Bastian Spiegel.
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : This is part of the "syntracker" midi sequencer.
// ----
// ---- changed: 04Nov2007, 06Nov2007, 04Jan2008, 08Jan2008, 02Aug2008, 21Sep2009, 22Sep2009
// ----          02Jan2010, 09Jan2010, 24Apr2010, 14May2010, 12Jun2010, 01Jul2010, 02Jul2010
// ----          04Jul2010, 15Jul2010, 17Jul2010, 19Jul2010, 08Sep2010, 27Sep2010, 09Oct2010
// ----          10Oct2010, 19Jan2011, 18Feb2011, 25Feb2011, 28Feb2011, 04Jan2013, 02Feb2014
// ----          10Feb2014, 03Feb2015, 06Feb2015, 01Sep2017, 29Nov2018, 22Mar2024, 28Feb2025
// ----
// ----
// ----

module MNT_InstrumentsTM;

use namespace ui;
use namespace st2;


// <class.png>
class NT_InstrumentsTM : TableModel {

   NodeTracker *parent_node;

   define int COL_ID       = 0;
   define int COL_NAME     = 1;

   public virtual getNumColumns() : int {
      return 2;
   }

   public virtual getColumnCaption(int _col) : String {
      return ["Id", "Instrument name"][_col];
   }

   public virtual getNumRows() : int {
      return 62; // 0..9, A..Z, a..z
   }

   public virtual getCellCaption(int _col, _row) : String {
      NT_Instrument *ins;

      if(null != parent_node)
      {
         ins <= parent_node.getInstrument(_row);
      }
      else
      {
         ins <= null;
      }

      if(null != ins)
      {
         if(!ins.isValid())
            tmp_label.setBackgroundTint(app_lnf.getColor(AppLookAndFeel.COLOR_NT_IV_INS_TABLE_INVALID_BG_TINT));

         switch(_col)
         {
            case COL_ID:
               return MNT_PatternView.instr_letters.get(ins.instrument_nr);

            case COL_NAME:
               return ins.getName();
         }
      }
      else
      {
         if(0 == _row)
            tmp_label.setBackgroundTint(app_lnf.getColor(AppLookAndFeel.COLOR_NT_IV_INS_TABLE_FIRST_BG_TINT));

         switch(_col)
         {
            case COL_ID:
               return MNT_PatternView.instr_letters.get(_row);

            case COL_NAME:
               return "-";
         }
      }
   }

   public virtual getMinimumColumnWidth(int _col) : int {
      switch(_col)
      {
         case COL_ID:
            return 16;

         case COL_NAME:
            return 100;
      }
   }

   public virtual getPreferredColumnWidth(int _col) : int {
      switch(_col)
      {
         case COL_ID:
            return 16;

         case COL_NAME:
            return 250;
      }
   }

}
