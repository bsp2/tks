// ----
// ---- file   : NT_DeleteInstrumentDialog.tks
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2014-2025 by Bastian Spiegel.
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : This is part of the "syntracker" sequencer.
// ----
// ---- created: 05Sep2014
// ---- changed: 01Mar2015, 28Feb2025
// ----
// ----
// ----

module MNT_DeleteInstrumentDialog;

use namespace ui;
use namespace st2;


class NT_DeleteInstrumentDialog extends ActionConsumer {
   ChoiceDialog d;
   NT_InstrumentView *listener;

   public method run(int _nr, String _name, NT_InstrumentView _listener) {
      listener <= _listener;

      d <= ChoiceDialogMMT.NewYesNo("Delete instrument",
                                    "Are you sure to delete instrument \'"+MNT_PatternView.instr_letters.get(_nr)+" (\""+_name+"\")?",
                                    this);
      d.setMessageFont("big7");
      d.setButtonIcons(null, UI.GetIcon("cancel"), null);
      d.setButtonFont("big5");
      d.invalidateSizeCaches();
      d.resizeToMinimum();
      d.showCentered();
   }

   public virtual consumeAction(IntAction _action) : boolean {
      if(_action.getActionProvider() == d)
      {
         d <= null; // Delete dialog
         switch(_action.getIntValue())
         {
            case ChoiceDialog.SELECT_YES:
               listener.deleteSelectedInstrument();
               return true;

            case ChoiceDialog.SELECT_NO:
               return true;
         }
      }
      return false;
   }
}
