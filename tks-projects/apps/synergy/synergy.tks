// ----
// ---- file   : synergy.tks
// ---- author : Bastian Spiegel <bs@tkscript.de>
// ---- legal  : (c) 2006-2025 by Bastian Spiegel.
// ----          Distributed under terms of the GNU LESSER GENERAL PUBLIC LICENSE (LGPL). See
// ----          http://www.gnu.org/licenses/licenses.html#LGPL or COPYING for further information.
// ----
// ---- info   : This is part of the "syntracker" sequencer.
// ----
// ---- changed: 14Sep2006, 17Sep2006, 20Sep2006, 15Oct2007, 20Oct2007, 21Oct2007, 22Oct2007,
// ----          30Oct2007, 31Oct2007, 04Nov2007, 05Nov2007, 10Nov2007, 21Dec2007, 04Jan2008
// ----          07Jan2008, 10Jan2008, 12Jan2008, 13Jan2008, 15Jan2008, 16Jan2008, 03Aug2008
// ----          09Aug2008, 24Aug2008, 31Aug2008, 17Sep2009, 18Sep2009, 20Sep2009, 21Sep2009
// ----          22Sep2009, 23Sep2009, 26Dec2009, 02Jan2010, 03Jan2010, 09Jan2010, 10Jan2010
// ----          11Jan2010, 16Jan2010, 25Jan2010, 27Jan2010, 29Jan2010, 06Feb2010, 25Feb2010
// ----          01Mar2010, 24Apr2010, 29Apr2010, 30Apr2010, 01May2010, 02May2010, 03May2010
// ----          04May2010, 11May2010, 14May2010, 15May2010, 16May2010, 06Jun2010, 10Jun2010
// ----          13Jun2010, 15Jun2010, 24Jun2010, 26Jun2010, 28Jun2010, 30Jun2010, 01Jul2010
// ----          02Jul2010, 04Jul2010, 06Jul2010, 10Jul2010, 12Jul2010, 16Jul2010, 17Jul2010
// ----          18Jul2010, 21Jul2010, 08Sep2010, 24Sep2010, 26Sep2010, 27Sep2010, 28Sep2010
// ----          04Oct2010, 08Oct2010, 09Oct2010, 10Oct2010, 12Oct2010, 13Oct2010, 14Oct2010
// ----          15Oct2010, 16Oct2010, 17Oct2010, 19Oct2010, 20Oct2010, 25Oct2010, 26Oct2010
// ----          02Nov2010, 09Nov2010, 16Nov2010, 21Nov2010, 19Jan2011, 23Jan2011, 03Feb2011
// ----          18Feb2011, 20Feb2011, 25Feb2011, 28Feb2011, 30Mar2011, 16Jan2012, 09Nov2012
// ----          04Jan2013, 29Mar2013, 19Apr2013, 05Jun2013, 09Aug2014, 14Aug2014, 19Aug2014
// ----          04Sep2014, 09Sep2014, 13Sep2014, 16Sep2014, 29Sep2014, 07Mar2016, 16Jun2017
// ----          29Aug2019, 24Oct2020, 21Nov2020, 26Jan2021, 16Dec2021, 27Dec2021, 11Aug2022
// ----          12Aug2022, 11Apr2024, 13Apr2024, 02Oct2024, 28Feb2025
// ----
// ----
// ----

module MST2;

use namespace ui;

namespace st2;

// ---- ST2 namespace global variables :

String program_directory;

RootForm *root_form;

ST_Song *current_song; // reference to current (sub-)song (never null)
ST_Song *[] all_songs; // subsong instances

Replay replay;

MIDIPipeRoot *current_pipe_root;  // points to current_song.pipe_root (never null)

Push push;
PushKbd push_kbd;
FaderPort faderport;
MFTwister mf_twister;
Console1 console1;
BidiCtl *[] bidi_ctls;  // refs to faderport / mf_twister

boolean b_mmc_force_global;
boolean b_mmc_force_ctltag_push;

AppLookAndFeel *app_lnf;  // ref to AppLookAndFeel_Dark/Light/Mono

NodeMonitor *mon_capture;  // helper instance for output capture

// context sensitive node editor autodev a/b transform input devs
//  (events will be forwarded to current node editor autodev a / b)
STX_MIDIOutDevice *nodeeditor_autodev_a;
STX_MIDIOutDevice *nodeeditor_autodev_b;

// <editfocus> device events will be forwarded to current node editor focus item (e.g. NodeModular module)
STX_MIDIOutDevice *nodeeditor_editfocus_dev;

// context sensitive sysex editor autodev
//  (events will be forwarded to current editor output device)
STX_MIDIOutDevice *pagesysex_autodev;

NMM_Arg mmarg_clipboard_a;
NMM_Arg mmarg_clipboard_b;

AudioLiveRecForm   *f_audio_liverec;  // initialized in RootForm
AudioLiveRecDialog *dlg_audio_liverec;  // initialized in RootForm

HashTable g_loaded_tsls;  // tracks currently loaded TSLs. key=tsl name (e.g. "mylib.tsl")

// Buffer instances. Indexed by profile_id. Unlinked when MIDISynthProfileData instance is actually created (on demand)
HashTable g_stashed_raw_project_midiprofiledata;

// Buffer instances (MIDIMapContext chunks). Indexed by node class name.
//  Unlinked when node instance is actually created (on demand)
HashTable g_stashed_raw_project_node_mmc_data;
