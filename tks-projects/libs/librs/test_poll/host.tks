// 20Aug2024

//  +0: client request id (inc'd by client)
//  +4: host reply id (set to client request id by host (ACK))
SharedBuffer sh;
if(sh.allocSharedMemoryByKey("test_sigusr1", 16+256*1024))
{
   sh.fillZero();
   int lastReq = sh.peekI32(0); // initially 0
   loop(100000)
   {
      int reqId;
      for(;;)
      {
         reqId = sh.peekI32(0);
         if(lastReq != reqId)
            break;
      }
      sh.pokeI32(4, reqId);
      lastReq = reqId;
   }
}
trace "host: cu";
