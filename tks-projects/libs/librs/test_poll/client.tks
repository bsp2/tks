// 20Aug2024

//  +0: client request id (inc'd by client)
//  +4: host reply id (set to client request id by host (ACK))
SharedBuffer sh;
if(sh.visitSharedMemory("test_sigusr1", 8))
{
   int tStart = milliSeconds();
   int iter = 1;
   loop(100000)
   {
      sh.pokeI32(0, iter);
      while(iter != sh.peekI32(4));
      iter++;
      // trace "xxx iter="+iter;
   }
   trace "xxx client: "+(iter-1)+" iterations in tDelta="+(milliSeconds()-tStart)+" ms";
   
}
trace "client: cu";

// =>
// % tks client
// xxx client: 100000 iterations in tDelta=52 ms
//
// (== ~2mio / sec)
